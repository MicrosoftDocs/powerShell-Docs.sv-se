---
ms.date: 12/12/2018
keywords: DSC, PowerShell, konfiguration, installation
title: Konfigurera LCM i PowerShell 4.0
ms.openlocfilehash: 747b15c483c79a7ecbb62214ef5a59f8dc137bd4
ms.sourcegitcommit: 6545c60578f7745be015111052fd7769f8289296
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 04/22/2020
ms.locfileid: "71941861"
---
# <a name="configuring-the-lcm-in-powershell-40"></a><span data-ttu-id="c025a-103">Konfigurera LCM i PowerShell 4.0</span><span class="sxs-lookup"><span data-stu-id="c025a-103">Configuring the LCM in PowerShell 4.0</span></span>

><span data-ttu-id="c025a-104">Gäller för: Windows PowerShell 4,0</span><span class="sxs-lookup"><span data-stu-id="c025a-104">Applies To: Windows PowerShell 4.0</span></span>

<span data-ttu-id="c025a-105">**Information som rör Windows PowerShell 5,0 och senare finns i [Konfigurera den lokala Configuration Manager](metaConfig.md).**</span><span class="sxs-lookup"><span data-stu-id="c025a-105">**For information related to Windows PowerShell 5.0 and later, see [Configuring the Local Configuration Manager](metaConfig.md).**</span></span>

<span data-ttu-id="c025a-106">Local Configuration Manager är DSC-motorn (Desired State Configuration) för Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="c025a-106">Local Configuration Manager is the Windows PowerShell Desired State Configuration (DSC) engine.</span></span>
<span data-ttu-id="c025a-107">Den körs på alla målnod och ansvarar för att anropa konfigurations resurserna som ingår i ett DSC-konfigurations skript.</span><span class="sxs-lookup"><span data-stu-id="c025a-107">It runs on all target nodes, and it is responsible for calling the configuration resources that are included in a DSC configuration script.</span></span>
<span data-ttu-id="c025a-108">I det här avsnittet visas egenskaperna för lokala Configuration Manager och hur du kan ändra de lokala Configuration Manager inställningarna på en målnod.</span><span class="sxs-lookup"><span data-stu-id="c025a-108">This topic lists the properties of Local Configuration Manager and describes how you can modify the Local Configuration Manager settings on a target node.</span></span>

## <a name="local-configuration-manager-properties"></a><span data-ttu-id="c025a-109">Egenskaper för lokal Configuration Manager</span><span class="sxs-lookup"><span data-stu-id="c025a-109">Local Configuration Manager properties</span></span>

<span data-ttu-id="c025a-110">I följande lista visas de lokala Configuration Manager egenskaper som du kan ange eller hämta.</span><span class="sxs-lookup"><span data-stu-id="c025a-110">The following lists the Local Configuration Manager properties that you can set or retrieve.</span></span>

- <span data-ttu-id="c025a-111">**AllowModuleOverwrite**: styr om nya konfigurationer som hämtas från konfigurations tjänsten tillåts skriva över de gamla på målnoden.</span><span class="sxs-lookup"><span data-stu-id="c025a-111">**AllowModuleOverwrite**: Controls whether new configurations downloaded from the configuration service are allowed to overwrite the old ones on the target node.</span></span> <span data-ttu-id="c025a-112">Möjliga värden är true och false.</span><span class="sxs-lookup"><span data-stu-id="c025a-112">Possible values are True and False.</span></span>
- <span data-ttu-id="c025a-113">**CertificateID**: tumavtrycket för ett certifikat som används för att skydda autentiseringsuppgifter som skickas i en konfiguration.</span><span class="sxs-lookup"><span data-stu-id="c025a-113">**CertificateID**: The thumbprint of a certificate used to secure credentials passed in a configuration.</span></span> <span data-ttu-id="c025a-114">Mer information finns i [vill du skydda autentiseringsuppgifter i Windows PowerShell Desired State Configuration?](https://blogs.msdn.microsoft.com/powershell/2014/01/31/want-to-secure-credentials-in-windows-powershell-desired-state-configuration/).</span><span class="sxs-lookup"><span data-stu-id="c025a-114">For more information see [Want to secure credentials in Windows PowerShell Desired State Configuration?](https://blogs.msdn.microsoft.com/powershell/2014/01/31/want-to-secure-credentials-in-windows-powershell-desired-state-configuration/).</span></span>
- <span data-ttu-id="c025a-115">**ConfigurationID**: anger ett GUID som används för att hämta en viss konfigurations fil från en pull-tjänst.</span><span class="sxs-lookup"><span data-stu-id="c025a-115">**ConfigurationID**: Indicates a GUID which is used to get a particular configuration file from a pull service.</span></span> <span data-ttu-id="c025a-116">GUID ser till att rätt konfigurations fil används.</span><span class="sxs-lookup"><span data-stu-id="c025a-116">The GUID ensures that the correct configuration file is accessed.</span></span>
- <span data-ttu-id="c025a-117">**ConfigurationMode**: anger hur den lokala Configuration Manager faktiskt tillämpar konfigurationen på målnoden.</span><span class="sxs-lookup"><span data-stu-id="c025a-117">**ConfigurationMode**: Specifies how the Local Configuration Manager actually applies the configuration to the target nodes.</span></span> <span data-ttu-id="c025a-118">Det kan ha följande värden:</span><span class="sxs-lookup"><span data-stu-id="c025a-118">It can take the following values:</span></span>
  - <span data-ttu-id="c025a-119">**ApplyOnly**: med det här alternativet tillämpar DSC konfigurationen och sker inte ytterligare om inte en ny konfiguration identifieras, antingen genom att du skickar en ny konfiguration direkt till målnoden eller om du ansluter till en pull-tjänst och DSC identifierar en ny konfiguration när den kontrollerar pull-tjänsten.</span><span class="sxs-lookup"><span data-stu-id="c025a-119">**ApplyOnly**: With this option, DSC applies the configuration and does nothing further unless a new configuration is detected, either by you sending a new configuration directly to the target node or if you are connecting to a pull service and DSC discovers a new configuration when it checks with the pull service.</span></span> <span data-ttu-id="c025a-120">Ingen åtgärd vidtas om nodens konfigurations riktning används.</span><span class="sxs-lookup"><span data-stu-id="c025a-120">If the target node's configuration drifts, no action is taken.</span></span>
  - <span data-ttu-id="c025a-121">**ApplyAndMonitor**: med det här alternativet (som är standard) använder DSC alla nya konfigurationer, oavsett om de skickas direkt till målnoden eller identifieras i en pull-tjänst.</span><span class="sxs-lookup"><span data-stu-id="c025a-121">**ApplyAndMonitor**: With this option (which is the default), DSC applies any new configurations, whether sent by you directly to the target node or discovered on a pull service.</span></span> <span data-ttu-id="c025a-122">Därefter, om konfigurationen av mål noden går från konfigurations filen, rapporterar DSC den avvikelsen i loggarna.</span><span class="sxs-lookup"><span data-stu-id="c025a-122">Thereafter, if the configuration of the target node drifts from the configuration file, DSC reports the discrepancy in logs.</span></span> <span data-ttu-id="c025a-123">Mer information om DSC-loggning finns i [använda händelse loggar för att diagnostisera fel i önskad tillstånds konfiguration](https://blogs.msdn.com/b/powershell/archive/2014/01/03/using-event-logs-to-diagnose-errors-in-desired-state-configuration.aspx).</span><span class="sxs-lookup"><span data-stu-id="c025a-123">For more about DSC logging, see [Using Event Logs to Diagnose Errors in Desired State Configuration](https://blogs.msdn.com/b/powershell/archive/2014/01/03/using-event-logs-to-diagnose-errors-in-desired-state-configuration.aspx).</span></span>
  - <span data-ttu-id="c025a-124">**ApplyAndAutoCorrect**: med det här alternativet använder DSC alla nya konfigurationer, oavsett om de skickas direkt till målnoden eller identifieras i en pull-tjänst.</span><span class="sxs-lookup"><span data-stu-id="c025a-124">**ApplyAndAutoCorrect**: With this option, DSC applies any new configurations, whether sent by you directly to the target node or discovered on a pull service.</span></span> <span data-ttu-id="c025a-125">Därefter, om konfigurationen av mål noden går från konfigurations filen, rapporterar DSC den avvikelsen i loggarna och försöker sedan justera konfigurationen för målnoden så att konfigurations filen är kompatibel.</span><span class="sxs-lookup"><span data-stu-id="c025a-125">Thereafter, if the configuration of the target node drifts from the configuration file, DSC reports the discrepancy in logs, and then attempts to adjust the target node configuration to bring in compliance with the configuration file.</span></span>
- <span data-ttu-id="c025a-126">**ConfigurationModeFrequencyMins**: representerar den frekvens (i minuter) som bakgrunds programmet för DSC försöker implementera den aktuella konfigurationen på målnoden.</span><span class="sxs-lookup"><span data-stu-id="c025a-126">**ConfigurationModeFrequencyMins**: Represents the frequency (in minutes) at which the background application of DSC attempts to implement the current configuration on the target node.</span></span> <span data-ttu-id="c025a-127">Standardvärdet är 15.</span><span class="sxs-lookup"><span data-stu-id="c025a-127">The default value is 15.</span></span> <span data-ttu-id="c025a-128">Det här värdet kan anges tillsammans med RefreshMode.</span><span class="sxs-lookup"><span data-stu-id="c025a-128">This value can be set in conjunction with RefreshMode.</span></span> <span data-ttu-id="c025a-129">När RefreshMode är inställt på Hämta kontaktar målnoden konfigurations tjänsten med ett intervall som anges av RefreshFrequencyMins och hämtar den aktuella konfigurationen.</span><span class="sxs-lookup"><span data-stu-id="c025a-129">When RefreshMode is set to PULL, the target node contacts the configuration service at an interval set by RefreshFrequencyMins and downloads the current configuration.</span></span> <span data-ttu-id="c025a-130">Oavsett RefreshMode-värdet, med det intervall som anges av ConfigurationModeFrequencyMins, tillämpar konsekvens motorn den senaste konfigurationen som hämtades till målnoden.</span><span class="sxs-lookup"><span data-stu-id="c025a-130">Regardless of the RefreshMode value, at the interval set by ConfigurationModeFrequencyMins, the consistency engine applies the latest configuration that was downloaded to the target node.</span></span> <span data-ttu-id="c025a-131">RefreshFrequencyMins ska anges till ett heltals multipel av ConfigurationModeFrequencyMins.</span><span class="sxs-lookup"><span data-stu-id="c025a-131">RefreshFrequencyMins should be set to an integer multiple of ConfigurationModeFrequencyMins.</span></span>
- <span data-ttu-id="c025a-132">**Autentiseringsuppgift**: anger autentiseringsuppgifter (som med Get-Credential) som krävs för att komma åt fjär resurser, t. ex. för att kontakta konfigurations tjänsten.</span><span class="sxs-lookup"><span data-stu-id="c025a-132">**Credential**: Indicates credentials (as with Get-Credential) required to access remote resources, such as to contact the configuration service.</span></span>
- <span data-ttu-id="c025a-133">**DownloadManagerCustomData**: representerar en matris som innehåller anpassade data som är speciella för hämtnings hanteraren.</span><span class="sxs-lookup"><span data-stu-id="c025a-133">**DownloadManagerCustomData**: Represents an array that contains custom data specific to the download manager.</span></span>
- <span data-ttu-id="c025a-134">**DownloadManagerName**: anger namnet på konfigurations-och modulens hämtnings hanterare.</span><span class="sxs-lookup"><span data-stu-id="c025a-134">**DownloadManagerName**: Indicates the name of the configuration and module download manager.</span></span>
- <span data-ttu-id="c025a-135">**RebootNodeIfNeeded**: Ställ in på `$true` för att tillåta att resurser startar om noden med `$global:DSCMachineStatus` hjälp av flaggan.</span><span class="sxs-lookup"><span data-stu-id="c025a-135">**RebootNodeIfNeeded**: Set this to `$true` to allow resources to reboot the Node using the `$global:DSCMachineStatus` flag.</span></span> <span data-ttu-id="c025a-136">Annars måste du starta om noden manuellt för alla konfigurationer som kräver det.</span><span class="sxs-lookup"><span data-stu-id="c025a-136">Otherwise, you will have to manually reboot the node for any configuration that requires it.</span></span> <span data-ttu-id="c025a-137">Standardvärdet är `$false`.</span><span class="sxs-lookup"><span data-stu-id="c025a-137">The default value is `$false`.</span></span> <span data-ttu-id="c025a-138">Om du vill använda den här inställningen när ett villkor för omstart utförs av något annat än DSC (till exempel Windows Installer) kombinerar du den här inställningen med [xPendingReboot](https://github.com/powershell/xpendingreboot) -modulen.</span><span class="sxs-lookup"><span data-stu-id="c025a-138">To use this setting when a reboot condition is enacted by something other than DSC (such as Windows Installer), combine this setting with the [xPendingReboot](https://github.com/powershell/xpendingreboot) module.</span></span>
- <span data-ttu-id="c025a-139">**RefreshFrequencyMins**: används när du har konfigurerat en pull-tjänst.</span><span class="sxs-lookup"><span data-stu-id="c025a-139">**RefreshFrequencyMins**: Used when you have set up a pull service.</span></span> <span data-ttu-id="c025a-140">Representerar den frekvens (i minuter) som den lokala Configuration Manager kontaktar en pull-tjänst för att hämta den aktuella konfigurationen.</span><span class="sxs-lookup"><span data-stu-id="c025a-140">Represents the frequency (in minutes) at which the Local Configuration Manager contacts a pull service to download the current configuration.</span></span> <span data-ttu-id="c025a-141">Det här värdet kan anges tillsammans med ConfigurationModeFrequencyMins.</span><span class="sxs-lookup"><span data-stu-id="c025a-141">This value can be set in conjunction with ConfigurationModeFrequencyMins.</span></span> <span data-ttu-id="c025a-142">När RefreshMode är inställt på Hämta kontaktar målnoden den pull-tjänst med ett intervall som anges av RefreshFrequencyMins och hämtar den aktuella konfigurationen.</span><span class="sxs-lookup"><span data-stu-id="c025a-142">When RefreshMode is set to PULL, the target node contacts the pull service at an interval set by RefreshFrequencyMins and downloads the current configuration.</span></span> <span data-ttu-id="c025a-143">Vid det intervall som anges av ConfigurationModeFrequencyMins tillämpar konsekvens motorn den senaste konfigurationen som hämtades till målnoden.</span><span class="sxs-lookup"><span data-stu-id="c025a-143">At the interval set by ConfigurationModeFrequencyMins, the consistency engine then applies the latest configuration that was downloaded to the target node.</span></span> <span data-ttu-id="c025a-144">Om RefreshFrequencyMins inte är inställt på ett heltals multipel av ConfigurationModeFrequencyMins, kommer systemet att avrundas.</span><span class="sxs-lookup"><span data-stu-id="c025a-144">If RefreshFrequencyMins is not set to an integer multiple of ConfigurationModeFrequencyMins, the system will round it up.</span></span> <span data-ttu-id="c025a-145">Standardvärdet är 30.</span><span class="sxs-lookup"><span data-stu-id="c025a-145">The default value is 30.</span></span>
- <span data-ttu-id="c025a-146">**RefreshMode**: möjliga värden är **push** (standard) och **pull**.</span><span class="sxs-lookup"><span data-stu-id="c025a-146">**RefreshMode**: Possible values are **Push** (the default) and **Pull**.</span></span> <span data-ttu-id="c025a-147">I "push"-konfigurationen måste du placera en konfigurations fil på varje målnod med valfri klient dator.</span><span class="sxs-lookup"><span data-stu-id="c025a-147">In the "push" configuration, you must place a configuration file on each target node, using any client computer.</span></span> <span data-ttu-id="c025a-148">I läget "pull" måste du konfigurera en pull-tjänst för lokala Configuration Manager att kontakta och komma åt konfigurationsfilerna.</span><span class="sxs-lookup"><span data-stu-id="c025a-148">In the "pull" mode, you must set up a pull service for Local Configuration Manager to contact and access the configuration files.</span></span>

> [!NOTE]
> <span data-ttu-id="c025a-149">LCM startar **ConfigurationModeFrequencyMins** -cykeln baserat på:</span><span class="sxs-lookup"><span data-stu-id="c025a-149">The LCM starts the **ConfigurationModeFrequencyMins** cycle based on:</span></span>
>
> - <span data-ttu-id="c025a-150">En ny Metaconfig tillämpas med hjälp av`Set-DscLocalConfigurationManager`</span><span class="sxs-lookup"><span data-stu-id="c025a-150">A new metaconfig is applied using `Set-DscLocalConfigurationManager`</span></span>
> - <span data-ttu-id="c025a-151">Omstart av datorn</span><span class="sxs-lookup"><span data-stu-id="c025a-151">A machine restart</span></span>
>
> <span data-ttu-id="c025a-152">För alla villkor där timer-processen upplever en krasch, kommer den att identifieras inom 30 sekunder och cykeln startas om.</span><span class="sxs-lookup"><span data-stu-id="c025a-152">For any condition where the timer process experiences a crash, that will be detected within 30 seconds and the cycle will be restarted.</span></span>
> <span data-ttu-id="c025a-153">En samtidig åtgärd kan fördröja cykeln från att startas, om den här åtgärdens varaktighet överskrider den konfigurerade cykel frekvensen, kommer nästa timer inte att starta.</span><span class="sxs-lookup"><span data-stu-id="c025a-153">A concurrent operation could delay the cycle from being started, if the duration of this operation exceeds the configured cycle frequency, the next timer will not start.</span></span>
>
> <span data-ttu-id="c025a-154">Metaconfig konfigureras till exempel med en frekvens på 15 minuter och hämtning sker vid T1.</span><span class="sxs-lookup"><span data-stu-id="c025a-154">Example, the metaconfig is configured at a 15 minute pull frequency and a pull occurs at T1.</span></span>  <span data-ttu-id="c025a-155">Noden slutförs inte i 16 minuter.</span><span class="sxs-lookup"><span data-stu-id="c025a-155">The Node does not finish work for 16 minutes.</span></span>  <span data-ttu-id="c025a-156">Den första 15 minuters cykeln ignoreras och nästa hämtning sker vid T1 + 15 + 15.</span><span class="sxs-lookup"><span data-stu-id="c025a-156">The first 15 minute cycle is ignored, and next pull will happen at T1+15+15.</span></span>

### <a name="example-of-updating-local-configuration-manager-settings"></a><span data-ttu-id="c025a-157">Exempel på uppdatering av inställningar för lokala Configuration Manager</span><span class="sxs-lookup"><span data-stu-id="c025a-157">Example of updating Local Configuration Manager settings</span></span>

<span data-ttu-id="c025a-158">Du kan uppdatera de lokala Configuration Manager inställningarna för en målnod genom att inkludera ett **LocalConfigurationManager** -block inuti Node-blocket i ett konfigurations skript, som du ser i följande exempel.</span><span class="sxs-lookup"><span data-stu-id="c025a-158">You can update the Local Configuration Manager settings of a target node by including a **LocalConfigurationManager** block inside the node block in a configuration script, as shown in the following example.</span></span>

```powershell
Configuration ExampleConfig
{
    Node "Server001"
    {
        LocalConfigurationManager
        {
            ConfigurationID = "646e48cb-3082-4a12-9fd9-f71b9a562d4e"
            ConfigurationModeFrequencyMins = 45
            ConfigurationMode = "ApplyAndAutocorrect"
            RefreshMode = "Pull"
            RefreshFrequencyMins = 90
            DownloadManagerName = "WebDownloadManager"
            DownloadManagerCustomData = (@{ServerUrl="https://$PullService/psdscpullserver.svc"})
            CertificateID = "71AA68562316FE3F73536F1096B85D66289ED60E"
            Credential = $cred
            RebootNodeIfNeeded = $true
            AllowModuleOverwrite = $false
        }
# One or more resource blocks can be added here
    }
}

# The following line invokes the configuration and creates a file called Server001.meta.mof at the specified path
ExampleConfig -OutputPath "c:\users\public\dsc"
```

<span data-ttu-id="c025a-159">Att köra skriptet i föregående exempel genererar en MOF-fil som anger och lagrar önskade inställningar.</span><span class="sxs-lookup"><span data-stu-id="c025a-159">Running the script in the previous example generates a MOF file that specifies and stores the desired settings.</span></span>
<span data-ttu-id="c025a-160">Om du vill tillämpa inställningarna kan du använda cmdleten **set-DscLocalConfigurationManager** , som visas i följande exempel.</span><span class="sxs-lookup"><span data-stu-id="c025a-160">To apply the settings, you can use the **Set-DscLocalConfigurationManager** cmdlet, as shown in the following example.</span></span>

```powershell
Set-DscLocalConfigurationManager -Path "c:\users\public\dsc"
```

> [!NOTE]
> <span data-ttu-id="c025a-161">För parametern **Path** måste du ange samma sökväg som du angav för parametern **OutputPath** när du anropade konfigurationen i föregående exempel.</span><span class="sxs-lookup"><span data-stu-id="c025a-161">For the **Path** parameter, you must specify the same path that you specified for the **OutputPath** parameter when you invoked the configuration in the previous example.</span></span>

<span data-ttu-id="c025a-162">Du kan använda cmdleten **Get-DscLocalConfigurationManager** för att se de aktuella inställningarna för lokal Configuration Manager.</span><span class="sxs-lookup"><span data-stu-id="c025a-162">To see the current Local Configuration Manager settings, you can use the **Get-DscLocalConfigurationManager** cmdlet.</span></span>
<span data-ttu-id="c025a-163">Om du anropar denna cmdlet utan parametrar hämtas de lokala Configuration Manager inställningarna för den nod som du kör den på som standard.</span><span class="sxs-lookup"><span data-stu-id="c025a-163">If you invoke this cmdlet with no parameters, by default it will get the Local Configuration Manager settings for the node on which you run it.</span></span>
<span data-ttu-id="c025a-164">Om du vill ange en annan nod använder du parametern **CimSession** med denna cmdlet.</span><span class="sxs-lookup"><span data-stu-id="c025a-164">To specify another node, use the **CimSession** parameter with this cmdlet.</span></span>

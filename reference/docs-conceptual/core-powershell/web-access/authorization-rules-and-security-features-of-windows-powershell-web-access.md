---
ms.date: 06/27/2017
keywords: PowerShell-cmdlet
title: Auktoriseringsregler och säkerhetsfunktioner i Windows PowerShell-webbåtkomst
ms.openlocfilehash: 1b4d4339efda78a5cb719921a9cb06881d119930
ms.sourcegitcommit: 01d6985ed190a222e9da1da41596f524f607a5bc
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 06/07/2018
ms.locfileid: "34483142"
---
# <a name="authorization-rules-and-security-features-of-windows-powershell-web-access"></a><span data-ttu-id="11a7a-103">Auktoriseringsregler och säkerhetsfunktioner i Windows PowerShell-webbåtkomst</span><span class="sxs-lookup"><span data-stu-id="11a7a-103">Authorization Rules and Security Features of Windows PowerShell Web Access</span></span>

<span data-ttu-id="11a7a-104">Uppdaterad: Juni 24 2013</span><span class="sxs-lookup"><span data-stu-id="11a7a-104">Updated: June 24, 2013</span></span>

<span data-ttu-id="11a7a-105">Gäller för: Windows Server 2012 R2, Windows Server 2012</span><span class="sxs-lookup"><span data-stu-id="11a7a-105">Applies To: Windows Server 2012 R2, Windows Server 2012</span></span>

<span data-ttu-id="11a7a-106">Windows PowerShell Web Access i Windows Server 2012 R2 och Windows Server 2012 har en begränsande säkerhetsmodell.</span><span class="sxs-lookup"><span data-stu-id="11a7a-106">Windows PowerShell Web Access in Windows Server 2012 R2 and Windows Server 2012 has a restrictive security model.</span></span>
<span data-ttu-id="11a7a-107">Användarna måste uttryckligen beviljas åtkomst innan de kan logga in på Windows PowerShell Web Access-gateway och Använd den webbaserade Windows PowerShell-konsolen.</span><span class="sxs-lookup"><span data-stu-id="11a7a-107">Users must explicitly be granted access before they can sign in to the Windows PowerShell Web Access gateway and use the web-based Windows PowerShell console.</span></span>

## <a name="configuring-authorization-rules-and-site-security"></a><span data-ttu-id="11a7a-108">Konfigurera auktoriseringsregler och säkerhet för webbplatser</span><span class="sxs-lookup"><span data-stu-id="11a7a-108">Configuring authorization rules and site security</span></span>

<span data-ttu-id="11a7a-109">När Windows PowerShell Web Access har installerats och gatewayen har konfigurerats, kan användarna öppna sidan logga in i en webbläsare, men de kan inte logga in förrän Windows PowerShell Web Access-administratören ger dem uttrycklig åtkomst.</span><span class="sxs-lookup"><span data-stu-id="11a7a-109">After Windows PowerShell Web Access is installed and the gateway is configured, users can open the sign-in page in a browser, but they cannot sign in until the Windows PowerShell Web Access administrator grants users access explicitly.</span></span>
<span data-ttu-id="11a7a-110">”Windows PowerShell Web Access-åtkomstkontroll hanteras med hjälp av en uppsättning Windows PowerShell-cmdlets som beskrivs i följande tabell.</span><span class="sxs-lookup"><span data-stu-id="11a7a-110">'Windows PowerShell Web Access' access control is managed by using the set of Windows PowerShell cmdlets described in the following table.</span></span>
<span data-ttu-id="11a7a-111">Det finns ingen jämförbar GUI för att lägga till eller hantera auktoriseringsregler.</span><span class="sxs-lookup"><span data-stu-id="11a7a-111">There is no comparable GUI for adding or managing authorization rules.</span></span>
<span data-ttu-id="11a7a-112">Se [Windows PowerShell-cmdletar för webbåtkomst](cmdlets/web-access-cmdlets.md).</span><span class="sxs-lookup"><span data-stu-id="11a7a-112">See [Windows PowerShell Web Access Cmdlets](cmdlets/web-access-cmdlets.md).</span></span>

<span data-ttu-id="11a7a-113">Administratörer kan definiera 0 -*n* autentisering regler för Windows PowerShell Web Access.</span><span class="sxs-lookup"><span data-stu-id="11a7a-113">Administrators can define 0-*n* authentication rules for Windows PowerShell Web Access.</span></span>
<span data-ttu-id="11a7a-114">Standardsäkerheten är begränsande i stället för tillåtande; noll autentiseringsregler innebär att ingen användare har åtkomst till något.</span><span class="sxs-lookup"><span data-stu-id="11a7a-114">The default security is restrictive rather than permissive; zero authentication rules means no users have access to anything.</span></span>

<span data-ttu-id="11a7a-115">[Add-PswaAuthorizationRule](cmdlets/add-pswaauthorizationrule.md) och [Test-PswaAuthorizationRule](cmdlets/test-pswaauthorizationrule.md) innehåller en parameter för autentiseringsuppgifter som gör att du kan lägga till och testa Windows PowerShell Web Access auktoriseringsregler från en fjärransluten i Windows Server 2012 R2 dator, eller från inom en aktiv Windows PowerShell Web Access-session.</span><span class="sxs-lookup"><span data-stu-id="11a7a-115">[Add-PswaAuthorizationRule](cmdlets/add-pswaauthorizationrule.md) and [Test-PswaAuthorizationRule](cmdlets/test-pswaauthorizationrule.md) in Windows Server 2012 R2 include a Credential parameter that allows you to add and test Windows PowerShell Web Access authorization rules from a remote computer, or from within an active Windows PowerShell Web Access session.</span></span>
<span data-ttu-id="11a7a-116">Som med andra Windows PowerShell-cmdlets som har en parameter för autentiseringsuppgifter, kan du ange ett PSCredential-objekt som värde för parametern.</span><span class="sxs-lookup"><span data-stu-id="11a7a-116">As with other Windows PowerShell cmdlets that have a Credential parameter, you can specify a PSCredential object as the value of the parameter.</span></span>
<span data-ttu-id="11a7a-117">Om du vill skapa ett PSCredential-objekt som innehåller autentiseringsuppgifter som du vill skicka till en fjärrdator, kör den [Get-Credential](https://msdn.microsoft.com/powershell/reference/5.1/microsoft.powershell.security/Get-Credential) cmdlet.</span><span class="sxs-lookup"><span data-stu-id="11a7a-117">To create a PSCredential object that contains credentials you want to pass to a remote computer, run the [Get-Credential](https://msdn.microsoft.com/powershell/reference/5.1/microsoft.powershell.security/Get-Credential) cmdlet.</span></span>

<span data-ttu-id="11a7a-118">Windows PowerShell Web Access-reglerna för autentisering är godkända regler.</span><span class="sxs-lookup"><span data-stu-id="11a7a-118">Windows PowerShell Web Access authentication rules are whitelist rules.</span></span>
<span data-ttu-id="11a7a-119">Varje regel är en definition av en tillåten anslutning mellan användare, måldatorer och särskilda Windows PowerShellÂ [sessionskonfigurationer](https://msdn.microsoft.com/powershell/reference/5.1/microsoft.powershell.core/about/about_session_configurations) (kallas också slutpunkter eller _körningsutrymmen_) på måldatorerna som angetts.</span><span class="sxs-lookup"><span data-stu-id="11a7a-119">Each rule is a definition of an allowed connection between users, target computers, and particular Windows PowerShellÂ [session configurations](https://msdn.microsoft.com/powershell/reference/5.1/microsoft.powershell.core/about/about_session_configurations) (also referred to as endpoints or _runspaces_) on specified target computers.</span></span>
<span data-ttu-id="11a7a-120">En förklaring på **körningsutrymmen** finns [början användning av PowerShell Körningsutrymmen](https://blogs.technet.microsoft.com/heyscriptingguy/2015/11/26/beginning-use-of-powershell-runspaces-part-1/)</span><span class="sxs-lookup"><span data-stu-id="11a7a-120">For an explanation on **runspaces** see [Beginning Use of PowerShell Runspaces](https://blogs.technet.microsoft.com/heyscriptingguy/2015/11/26/beginning-use-of-powershell-runspaces-part-1/)</span></span>

> <span data-ttu-id="11a7a-121">**Säkerhetsmeddelande**</span><span class="sxs-lookup"><span data-stu-id="11a7a-121">**Security Note**</span></span>
>
> <span data-ttu-id="11a7a-122">En användare behöver endast att en regel är TRUE för att få åtkomst.</span><span class="sxs-lookup"><span data-stu-id="11a7a-122">A user needs only one rule to be true to get access.</span></span>
<span data-ttu-id="11a7a-123">Om en användare får åtkomst till en dator med antingen fullständig språkåtkomst eller endast åtkomst till Windows PowerShell-cmdletar för fjärrhantering, från den webbaserade konsolen kan användaren logga in (eller hopp) till andra datorer som är anslutna till den första måldatorn.</span><span class="sxs-lookup"><span data-stu-id="11a7a-123">If a user is given access to one computer with either full language access or access only to Windows PowerShell remote management cmdlets, from the web-based console, the user can log on (or hop) to other computers that are connected to the first target computer.</span></span>
<span data-ttu-id="11a7a-124">Det säkraste sättet att konfigurera Windows PowerShell-webbåtkomst är att ge användarna åtkomst till begränsade sessionskonfigurationer som tillåter dem att utföra olika aktiviteter som normalt sett måste utföras med fjärranslutning.</span><span class="sxs-lookup"><span data-stu-id="11a7a-124">The most secure way to configure Windows PowerShell Web Access is to allow users access only to constrained session configurations that allow them to accomplish specific tasks that they normally need to perform remotely.</span></span>

<span data-ttu-id="11a7a-125">De cmdlets som refereras i [Windows PowerShell-cmdletar för webbåtkomst](cmdlets/web-access-cmdlets.md) kunna skapa en uppsättning åtkomstregler som används för att auktorisera en användare på Windows PowerShell Web Access-gateway.</span><span class="sxs-lookup"><span data-stu-id="11a7a-125">The cmdlets referenced in [Windows PowerShell Web Access Cmdlets](cmdlets/web-access-cmdlets.md) allow to create a set of access rules which are used to authorize a user on the Windows PowerShell Web Access gateway.</span></span>
<span data-ttu-id="11a7a-126">Reglerna skiljer sig från åtkomstkontrollistor (ACL) på måldatorn och ger ett extra säkerhetslager för webbåtkomst.</span><span class="sxs-lookup"><span data-stu-id="11a7a-126">The rules are different from the access control lists (ACLs) on the destination computer, and provide an additional layer of security for web access.</span></span>
<span data-ttu-id="11a7a-127">Mer information om säkerhet finns i följande avsnitt.</span><span class="sxs-lookup"><span data-stu-id="11a7a-127">More details about security are described in the following section.</span></span>

<span data-ttu-id="11a7a-128">Om användarna inte kan skicka någon av de föregående säkerhetslagren, får de ett allmänt ”åtkomst nekad”-meddelande i sina webbläsarfönster.</span><span class="sxs-lookup"><span data-stu-id="11a7a-128">If users cannot pass any of the preceding security layers, they receive a generic 'access denied' message in their browser windows.</span></span>
<span data-ttu-id="11a7a-129">Även om säkerhetsinformation är loggad på gateway-servern, visas inte information om hur många säkerhetslager som skickades för slutanvändarna, ej heller på vilket lager inloggnings- eller autentiseringsfelet uppstod.</span><span class="sxs-lookup"><span data-stu-id="11a7a-129">Although security details are logged on the gateway server, end users are not shown information about how many security layers they passed, or at which layer the sign-in or authentication failure occurred.</span></span>

<span data-ttu-id="11a7a-130">Mer information om hur du konfigurerar auktoriseringsregler finns [konfigurera auktoriseringsregler](#configuring-authorization-rules-and-site-security) i det här avsnittet.</span><span class="sxs-lookup"><span data-stu-id="11a7a-130">For more information about configuring authorization rules, see [configuring authorization rules](#configuring-authorization-rules-and-site-security) in this topic.</span></span>

### <a name="security"></a><span data-ttu-id="11a7a-131">Säkerhet</span><span class="sxs-lookup"><span data-stu-id="11a7a-131">Security</span></span>

<span data-ttu-id="11a7a-132">Windows PowerShell Web Access-säkerhetsmodellen har fyra lager mellan en slutanvändare i den webbaserade konsolen och en måldator.</span><span class="sxs-lookup"><span data-stu-id="11a7a-132">The Windows PowerShell Web Access security model has four layers between an end user of the web-based console, and a target computer.</span></span>
<span data-ttu-id="11a7a-133">Windows PowerShell Web Access-administratörer kan lägga till säkerhetslager via ytterligare konfiguration i IIS Manager-konsolen.</span><span class="sxs-lookup"><span data-stu-id="11a7a-133">Windows PowerShell Web Access administrators can add security layers through additional configuration in the IIS Manager console.</span></span>
<span data-ttu-id="11a7a-134">Mer information om hur du skyddar webbplatser i IIS Manager-konsolen finns [konfigurera Web Server Security (IIS 7)](https://technet.microsoft.com/library/cc731278).</span><span class="sxs-lookup"><span data-stu-id="11a7a-134">For more information about securing websites in the IIS Manager console, see [Configure Web Server Security (IIS 7)](https://technet.microsoft.com/library/cc731278).</span></span>
<span data-ttu-id="11a7a-135">Mer information om IIS-metodtips och förhindra denial of service-attacker finns [bästa praxis för förhindra DoS/Denial of Service-attacker](https://technet.microsoft.com/library/cc750213).</span><span class="sxs-lookup"><span data-stu-id="11a7a-135">For more information about IIS best practices and preventing denial-of-service attacks, see [Best Practices for Preventing DoS/Denial of Service Attacks](https://technet.microsoft.com/library/cc750213).</span></span>
<span data-ttu-id="11a7a-136">En administratör kan också köpa och installera ytterligare programvara autentisering.</span><span class="sxs-lookup"><span data-stu-id="11a7a-136">An administrator can also buy and install additional retail authentication software.</span></span>

<span data-ttu-id="11a7a-137">I följande tabell beskrivs de fyra säkerhetslagren mellan slutanvändare och måldatorer.</span><span class="sxs-lookup"><span data-stu-id="11a7a-137">The following table describes the four layers of security between end users and target computers.</span></span>

|<span data-ttu-id="11a7a-138">Nivå</span><span class="sxs-lookup"><span data-stu-id="11a7a-138">Level</span></span>|<span data-ttu-id="11a7a-139">Lager</span><span class="sxs-lookup"><span data-stu-id="11a7a-139">Layer</span></span>|
|-|-|
|<span data-ttu-id="11a7a-140">1</span><span class="sxs-lookup"><span data-stu-id="11a7a-140">1</span></span>|[<span data-ttu-id="11a7a-141">IIS säkerhetsfunktioner för webbserver</span><span class="sxs-lookup"><span data-stu-id="11a7a-141">iis web server security features</span></span>](#iis-web-server-security-features)|
|<span data-ttu-id="11a7a-142">2</span><span class="sxs-lookup"><span data-stu-id="11a7a-142">2</span></span>|[<span data-ttu-id="11a7a-143">Windows powershell web access-formulärbaserad gateway-autentisering</span><span class="sxs-lookup"><span data-stu-id="11a7a-143">windows powershell web access forms-based gateway authentication</span></span>](#windows-powershell-web-access-forms-based-gateway-authentication)|
|<span data-ttu-id="11a7a-144">3</span><span class="sxs-lookup"><span data-stu-id="11a7a-144">3</span></span>|[<span data-ttu-id="11a7a-145">auktoriseringsregler för Windows powershell web access</span><span class="sxs-lookup"><span data-stu-id="11a7a-145">windows powershell web access authorization rules</span></span>](#windows-powershell-web-access-authorization-rules)|
|<span data-ttu-id="11a7a-146">4</span><span class="sxs-lookup"><span data-stu-id="11a7a-146">4</span></span>|[<span data-ttu-id="11a7a-147">regler för autentisering och auktorisering av mål</span><span class="sxs-lookup"><span data-stu-id="11a7a-147">target authentication and authorization rules</span></span>](#target-authentication-and-authorization-rules)|

<span data-ttu-id="11a7a-148">Detaljerad information om varje lager kan hittas under följande rubriker:</span><span class="sxs-lookup"><span data-stu-id="11a7a-148">Detailed information about each layer can be found under the following headings:</span></span>

#### <a name="iis-web-server-security-features"></a><span data-ttu-id="11a7a-149">Säkerhetsfunktioner för IIS-webbserver</span><span class="sxs-lookup"><span data-stu-id="11a7a-149">IIS Web Server security features</span></span>

<span data-ttu-id="11a7a-150">Windows PowerShell Web Access-användare måste alltid ange ett användarnamn och lösenord för att autentisera sina konton på gatewayen.</span><span class="sxs-lookup"><span data-stu-id="11a7a-150">Windows PowerShell Web Access users must always provide a user name and password to authenticate their accounts on the gateway.</span></span>
<span data-ttu-id="11a7a-151">Dock Windows PowerShell Web Access-administratörer kan också aktivera autentisering av valfria klientcertifikat eller inaktivera, se [installerar och använder windows powershell-webbåtkomst](install-and-use-windows-powershell-web-access.md) att aktivera ett testcertifikat och senare, hur du konfigurerar en äkta certifikat).</span><span class="sxs-lookup"><span data-stu-id="11a7a-151">However, Windows PowerShell Web Access administrators can also turn optional client certificate authentication on or off, see [install and use windows powershell web access](install-and-use-windows-powershell-web-access.md) to enable a test certificate and, later, how to configure a genuine certificate).</span></span>

<span data-ttu-id="11a7a-152">Funktionen för valfria klientcertifikat kräver att slutanvändarna har ett giltigt klientcertifikat, förutom sina användarnamn och lösenord, och att de ingår i konfigurationen av Webbserver (IIS).</span><span class="sxs-lookup"><span data-stu-id="11a7a-152">The optional client certificate feature requires end users to have a valid client certificate, in addition to their user names and passwords, and is part of Web Server (IIS) configuration.</span></span>
<span data-ttu-id="11a7a-153">När lagret för klientcertifikatet är aktiverat uppmanas användarna att ange giltiga certifikat innan sina inloggningsuppgifter i Windows PowerShell Web Access inloggningssida.</span><span class="sxs-lookup"><span data-stu-id="11a7a-153">When the client certificate layer is enabled, the Windows PowerShell Web Access sign-in page prompts users to provide valid certificates before their sign-in credentials are evaluated.</span></span>
<span data-ttu-id="11a7a-154">Autentiseringen av klientcertifikat kontrollerar automatiskt klientcertifikatet.</span><span class="sxs-lookup"><span data-stu-id="11a7a-154">Client certificate authentication automatically checks for the client certificate.</span></span>
<span data-ttu-id="11a7a-155">Om ett giltigt certifikat hittas, informerar Windows PowerShell Web Access användare, så att de kan ange certifikatet.</span><span class="sxs-lookup"><span data-stu-id="11a7a-155">If a valid certificate is not found, Windows PowerShell Web Access informs users, so they can provide the certificate.</span></span>
<span data-ttu-id="11a7a-156">Om ett giltigt klientcertifikat hittas, öppnar Windows PowerShell Web Access inloggningssida för användarna att ange sina användarnamn och lösenord.</span><span class="sxs-lookup"><span data-stu-id="11a7a-156">If a valid client certificate is found, Windows PowerShell Web Access opens the sign-in page for users to provide their user names and passwords.</span></span>

<span data-ttu-id="11a7a-157">Detta är ett exempel på ytterligare säkerhetsinställningar som erbjuds av IIS-webbserver.</span><span class="sxs-lookup"><span data-stu-id="11a7a-157">This is one example of additional security settings that are offered by IIS Web Server.</span></span>
<span data-ttu-id="11a7a-158">Mer information om andra IIS-säkerhetsfunktioner finns [konfigurera Web Server Security (IIS 7)](https://technet.microsoft.com/library/cc731278)</span><span class="sxs-lookup"><span data-stu-id="11a7a-158">For more information about other IIS security features, see [Configure Web Server Security (IIS 7)](https://technet.microsoft.com/library/cc731278)</span></span>

#### <a name="windows-powershell-web-access-forms-based-gateway-authentication"></a><span data-ttu-id="11a7a-159">Windows PowerShell Web Access-formulärbaserad gateway-autentisering</span><span class="sxs-lookup"><span data-stu-id="11a7a-159">Windows PowerShell Web Access forms-based gateway authentication</span></span>

<span data-ttu-id="11a7a-160">Windows PowerShell Web Access inloggningssida kräver en uppsättning autentiseringsuppgifter (användarnamn och lösenord) och ger användarna möjlighet att ange olika autentiseringsuppgifter för måldatorn.</span><span class="sxs-lookup"><span data-stu-id="11a7a-160">The Windows PowerShell Web Access sign-in page requires a set of credentials (user name and password) and offers users the option of providing different credentials for the target computer.</span></span>
<span data-ttu-id="11a7a-161">Om användaren inte tillhandahåller alternativa autentiseringsuppgifter används de primära användarnamn och lösenord som ansluter till gatewayen också för att ansluta till måldatorn.</span><span class="sxs-lookup"><span data-stu-id="11a7a-161">If the user does not provide alternate credentials, the primary user name and password that are used to connect to the gateway are also used to connect to the target computer.</span></span>

<span data-ttu-id="11a7a-162">Autentiseringsuppgifterna som krävs autentiseras på gatewayen för Windows PowerShell Web Access.</span><span class="sxs-lookup"><span data-stu-id="11a7a-162">The required credentials are authenticated on the Windows PowerShell Web Access gateway.</span></span>
<span data-ttu-id="11a7a-163">Dessa autentiseringsuppgifter måste vara giltiga användarkonton på antingen den lokala Windows PowerShell Web Access gateway-servern eller i Active Directory.</span><span class="sxs-lookup"><span data-stu-id="11a7a-163">These credentials must be valid user accounts on either the local Windows PowerShell Web Access gateway server, or in Active Directory.</span></span>

#### <a name="windows-powershell-web-access-authorization-rules"></a><span data-ttu-id="11a7a-164">Windows PowerShell Web Access auktoriseringsregler</span><span class="sxs-lookup"><span data-stu-id="11a7a-164">Windows PowerShell Web Access authorization rules</span></span>

<span data-ttu-id="11a7a-165">När en användare autentiseras på gatewayen, kontrollerar Windows PowerShell Web Access auktoriseringsregler för att kontrollera om användaren har åtkomst till den begärda måldatorn.</span><span class="sxs-lookup"><span data-stu-id="11a7a-165">After a user is authenticated at the gateway, Windows PowerShell Web Access checks authorization rules to verify if the user has access to the requested target computer.</span></span>
<span data-ttu-id="11a7a-166">Efter auktoriseringen skickas användarens autentiseringsuppgifter vidare till måldatorn.</span><span class="sxs-lookup"><span data-stu-id="11a7a-166">After successful authorization, the user's credentials are passed along to the target computer.</span></span>

<span data-ttu-id="11a7a-167">Reglerna utvärderas bara när en användare har autentiserats av gatewayen och innan användaren kan autentiseras på en måldator.</span><span class="sxs-lookup"><span data-stu-id="11a7a-167">These rules are evaluated only after a user has been authenticated by the gateway, and before a user can be authenticated on a target computer.</span></span>

#### <a name="target-authentication-and-authorization-rules"></a><span data-ttu-id="11a7a-168">Mål för autentisering och auktoriseringsregler</span><span class="sxs-lookup"><span data-stu-id="11a7a-168">Target authentication and authorization rules</span></span>

<span data-ttu-id="11a7a-169">Det sista säkerhetslagret för Windows PowerShell-webbåtkomst är target-egna säkerhetskonfiguration.</span><span class="sxs-lookup"><span data-stu-id="11a7a-169">The final layer of security for Windows PowerShell Web Access is the target computer's own security configuration.</span></span>
<span data-ttu-id="11a7a-170">Användare måste ha lämpliga åtkomsträttigheter som konfigurerats på måldatorn och även i auktoriseringsregler för Windows PowerShell Web Access att köra en Windows PowerShell-webbaserad konsol som påverkar en måldator via Windows PowerShell Web Access.</span><span class="sxs-lookup"><span data-stu-id="11a7a-170">Users must have the appropriate access rights configured on the target computer, and also in the Windows PowerShell Web Access authorization rules, to run a Windows PowerShell web-based console that affects a target computer through Windows PowerShell Web Access.</span></span>

<span data-ttu-id="11a7a-171">Lagret innehåller samma säkerhetsmekanismer som utvärderar anslutningsförsök om användarna försökte skapa en fjärransluten Windows PowerShell-session till en måldator från Windows PowerShell genom att köra den [Enter-PSSession](https://msdn.microsoft.com/powershell/reference/5.1/microsoft.powershell.core/Enter-PSSession) eller [New-PSSession](https://msdn.microsoft.com/powershell/reference/5.1/microsoft.powershell.core/new-pssession) cmdlets.</span><span class="sxs-lookup"><span data-stu-id="11a7a-171">This layer offers the same security mechanisms that would evaluate connection attempts if users tried to create a remote Windows PowerShell session to a target computer from within Windows PowerShell by running the [Enter-PSSession](https://msdn.microsoft.com/powershell/reference/5.1/microsoft.powershell.core/Enter-PSSession) or [New-PSSession](https://msdn.microsoft.com/powershell/reference/5.1/microsoft.powershell.core/new-pssession) cmdlets.</span></span>

<span data-ttu-id="11a7a-172">Som standard använder Windows PowerShell Web Access primära användarnamn och lösenord för autentisering på både gatewayen och måldatorn.</span><span class="sxs-lookup"><span data-stu-id="11a7a-172">By default, Windows PowerShell Web Access uses the primary user name and password for authentication on both the gateway and the target computer.</span></span>
<span data-ttu-id="11a7a-173">Den webbaserade inloggningssidan, i avsnittet **valfria anslutningsinställningar**, ger användarna möjlighet att ange olika autentiseringsuppgifter för måldatorn, om de behövs.</span><span class="sxs-lookup"><span data-stu-id="11a7a-173">The web-based sign-in page , in a section titled **Optional connection settings**, offers users the option of providing different credentials for the target computer , if they are required.</span></span>
<span data-ttu-id="11a7a-174">Om användaren inte anger alternativa autentiseringsuppgifter används också primära användarnamn och lösenord som används för att ansluta till gatewayen att ansluta till måldatorn.</span><span class="sxs-lookup"><span data-stu-id="11a7a-174">If the user does not provide alternate credentials , the primary user name and password that are used to connect to the gateway are also used to connect to the target computer.</span></span>

<span data-ttu-id="11a7a-175">Auktoriseringsregler kan användas för att ge användarna åtkomst till en viss sessionskonfiguration.</span><span class="sxs-lookup"><span data-stu-id="11a7a-175">Authorization rules can be used to allow users access to a particular session configuration.</span></span>
<span data-ttu-id="11a7a-176">Du kan skapa _begränsade körningsutrymmen_ eller sessionskonfigurationer för Windows PowerShell Web Access och ge särskilda användare att ansluta till vissa specifika sessionskonfigurationer när de loggar in på Windows PowerShell Web Access.</span><span class="sxs-lookup"><span data-stu-id="11a7a-176">You can create _restricted runspaces_ or session configurations for Windows PowerShell Web Access , and allow specific users to connect only to specific session configurations when they sign in to Windows PowerShell Web Access.</span></span>
<span data-ttu-id="11a7a-177">Du kan använda åtkomstkontrollistor (ACL) för att avgöra vilka användare som har åtkomst till specifika slutpunkter och ytterligare begränsa åtkomsten till slutpunkten för en specifik uppsättning användare genom att använda auktoriseringsregler som beskrivs i det här avsnittet.</span><span class="sxs-lookup"><span data-stu-id="11a7a-177">You can use access control lists (ACLs) to determine which users have access to specific endpoints , and further restrict access to the endpoint for a specific set of users by using authorization rules described in this section.</span></span>
<span data-ttu-id="11a7a-178">Mer information om begränsade körningsutrymmen finns [skapar ett begränsat körningsutrymme](https://msdn.microsoft.com/library/dn614668).</span><span class="sxs-lookup"><span data-stu-id="11a7a-178">For more information about restricted runspaces, see [Creating a constrained runspace](https://msdn.microsoft.com/library/dn614668).</span></span>

### <a name="configuring-authorization-rules"></a><span data-ttu-id="11a7a-179">Konfigurera auktoriseringsregler</span><span class="sxs-lookup"><span data-stu-id="11a7a-179">Configuring authorization rules</span></span>

<span data-ttu-id="11a7a-180">Administratörer vill troligen ha samma auktoriseringsregel för Windows PowerShell Web Access-användare som redan har definierats i sina miljöer för Windows PowerShell-fjärrhantering.</span><span class="sxs-lookup"><span data-stu-id="11a7a-180">Administrators likely want the same authorization rule for Windows PowerShell Web Access users that is already defined in their environment for Windows PowerShell remote management.</span></span>
<span data-ttu-id="11a7a-181">Den första proceduren i det här avsnittet beskriver hur du lägger till en säker auktoriseringsregel som ger åtkomst till en användare som loggar in att hantera en dator, och inom en enda sessionskonfiguration.</span><span class="sxs-lookup"><span data-stu-id="11a7a-181">The first procedure in this section describes how to add a secure authorization rule that grants access to one user , signing in to manage one computer , and within a single session configuration.</span></span>
<span data-ttu-id="11a7a-182">Den andra proceduren beskriver hur du tar bort en auktoriseringsregel som inte längre behövs.</span><span class="sxs-lookup"><span data-stu-id="11a7a-182">The second procedure describes how to remove an authorization rule that is no longer needed.</span></span>

<span data-ttu-id="11a7a-183">Om du tänker använda anpassade konfigurationer för att tillåta specifika användare att arbeta i begränsade körningsutrymmen i Windows PowerShell Web Access kan du skapa dina anpassade konfigurationer innan du lägger till auktoriseringsregler som refererar till dem.</span><span class="sxs-lookup"><span data-stu-id="11a7a-183">If you plan to use custom session configurations to allow specific users to work only within restricted runspaces in Windows PowerShell Web Access , create your custom session configurations before you add authorization rules that refer to them.</span></span>
<span data-ttu-id="11a7a-184">Du kan inte använda Windows PowerShell Web Access-cmdlets för att skapa anpassade sessionskonfigurationer.</span><span class="sxs-lookup"><span data-stu-id="11a7a-184">You cannot use the Windows PowerShell Web Access cmdlets to create custom session configurations.</span></span>
<span data-ttu-id="11a7a-185">Mer information om hur du skapar anpassade sessionskonfigurationer finns [about_Session_Configuration_Files](https://msdn.microsoft.com/powershell/reference/5.1/microsoft.powershell.core/about/about_session_configuration_files).</span><span class="sxs-lookup"><span data-stu-id="11a7a-185">For more information about creating custom session configurations , see [about_Session_Configuration_Files](https://msdn.microsoft.com/powershell/reference/5.1/microsoft.powershell.core/about/about_session_configuration_files).</span></span>

<span data-ttu-id="11a7a-186">Windows PowerShell Web Access-cmdlets stöder ett jokertecken, en asterisk ( \* ).</span><span class="sxs-lookup"><span data-stu-id="11a7a-186">Windows PowerShell Web Access cmdlets support one wildcard character , an asterisk ( \* ).</span></span>
<span data-ttu-id="11a7a-187">Jokertecken i strängar stöds inte. Använd en enda asterisk per egenskap (användare, datorer eller sessionskonfigurationer).</span><span class="sxs-lookup"><span data-stu-id="11a7a-187">Wildcard characters within strings are not supported; use a single asterisk per property (users, computers, or session configurations).</span></span>

> <span data-ttu-id="11a7a-188">**Obs!**</span><span class="sxs-lookup"><span data-stu-id="11a7a-188">**Note**</span></span>
>
> <span data-ttu-id="11a7a-189">Fler sätt som du kan använda auktoriseringsregler för att bevilja åtkomst till användare och att skydda Windows PowerShell Web Access-miljö finns [andra Scenarioexempel](#other-authorization-rule-scenario-examples) i det här avsnittet.</span><span class="sxs-lookup"><span data-stu-id="11a7a-189">For more ways you can use authorization rules to grant access to users and help secure the Windows PowerShell Web Access environment , see [other authorization rule scenario examples](#other-authorization-rule-scenario-examples) in this topic.</span></span>

#### <a name="to-add-a-restrictive-authorization-rule"></a><span data-ttu-id="11a7a-190">Så här lägger du till en regel för begränsad auktorisering</span><span class="sxs-lookup"><span data-stu-id="11a7a-190">To add a restrictive authorization rule</span></span>

1. <span data-ttu-id="11a7a-191">Gör något av följande för att öppna en Windows PowerShell-session med utökade användarrättigheter.</span><span class="sxs-lookup"><span data-stu-id="11a7a-191">Do one of the following to open a Windows PowerShell session with elevated user rights.</span></span>

    - <span data-ttu-id="11a7a-192">Högerklicka på Windows-skrivbordet **Windows PowerShell** i Aktivitetsfältet och klicka sedan på **kör som administratör**.</span><span class="sxs-lookup"><span data-stu-id="11a7a-192">On the Windows desktop, right-click **Windows PowerShell** on the taskbar , and then click **Run as Administrator**.</span></span>

    - <span data-ttu-id="11a7a-193">På Windows **starta** , högerklicka på **Windows PowerShell** , och klicka sedan på **kör som administratör**.</span><span class="sxs-lookup"><span data-stu-id="11a7a-193">On the Windows **Start** screen, right-click **Windows PowerShell** , and then click **Run as Administrator**.</span></span>

2. <span data-ttu-id="11a7a-194">**Valfritt steg** för att begränsa användaråtkomsten med hjälp av sessionskonfigurationer:</span><span class="sxs-lookup"><span data-stu-id="11a7a-194">**Optional step** For restricting user access by using session configurations:</span></span>

    <span data-ttu-id="11a7a-195">Kontrollera att de sessionskonfigurationer som du vill använda redan finns i dina regler.</span><span class="sxs-lookup"><span data-stu-id="11a7a-195">Verify that the session configurations that you want to use , already exist in your rules .</span></span>
<span data-ttu-id="11a7a-196">Om de inte ännu har skapats använder du instruktionerna för att skapa sessionskonfigurationer i [about_Session_Configuration_Files](https://msdn.microsoft.com/powershell/reference/5.1/microsoft.powershell.core/about/about_session_configuration_files).</span><span class="sxs-lookup"><span data-stu-id="11a7a-196">If they have not yet been created , use instructions for creating session configurations in [about_Session_Configuration_Files](https://msdn.microsoft.com/powershell/reference/5.1/microsoft.powershell.core/about/about_session_configuration_files).</span></span>

3. <span data-ttu-id="11a7a-197">Denna auktoriseringsregel ger en specifik användaråtkomst till en dator i nätverket som de normalt har åtkomst, med åtkomst till en specifik sessionskonfiguration som är begränsade till användaren '™ vanliga skript- och cmdlet behov.</span><span class="sxs-lookup"><span data-stu-id="11a7a-197">This authorization rule allows a specific user access to one computer on the network to which they typically have access, with access to a specific session configuration that is scoped to the user'™s typical scripting and cmdlet needs.</span></span> <span data-ttu-id="11a7a-198">Skriv följande och tryck sedan på **Ange**.</span><span class="sxs-lookup"><span data-stu-id="11a7a-198">Type the following, and then press **Enter**.</span></span>

```powershell
Add-PswaAuthorizationRule -UserName <domain\user | computer\user> -ComputerName <computer_name> -ConfigurationName <session_configuration_name>
```

  - <span data-ttu-id="11a7a-199">I följande exempel visas en användare med namnet _JSmith_ i den _Contoso_ domän beviljas åtkomst att hantera datorn _Contoso_214_, och använda en sessionskonfiguration med namnet _NewAdminsOnly_.</span><span class="sxs-lookup"><span data-stu-id="11a7a-199">In the following example, a user named _JSmith_ in the _Contoso_ domain is granted access to manage the computer _Contoso_214_, and use a session configuration named _NewAdminsOnly_.</span></span>

```powershell
Add-PswaAuthorizationRule -UserName 'Contoso\JSmith' -ComputerName Contoso_214 -ConfigurationName NewAdminsOnly
```

4. <span data-ttu-id="11a7a-200">Kontrollera att regeln har skapats genom att köra den **Get-PswaAuthorizationRule** cmdlet, eller **Test-PswaAuthorizationRule - UserName &lt;domän\\användare | datorn\\ användaren&gt; - ComputerName** &lt;computer_name&gt;.</span><span class="sxs-lookup"><span data-stu-id="11a7a-200">Verify that the rule has been created by running either the **Get-PswaAuthorizationRule** cmdlet, or **Test-PswaAuthorizationRule -UserName &lt;domain\\user | computer\\user&gt; -ComputerName** &lt;computer_name&gt;.</span></span> <span data-ttu-id="11a7a-201">Till exempel **Test-PswaAuthorizationRule - UserName Contoso\\JSmith - ComputerName Contoso_214**.</span><span class="sxs-lookup"><span data-stu-id="11a7a-201">For example, **Test-PswaAuthorizationRule -UserName Contoso\\JSmith -ComputerName Contoso_214**.</span></span>

#### <a name="to-remove-an-authorization-rule"></a><span data-ttu-id="11a7a-202">Så här tar du bort en auktoriseringsregel</span><span class="sxs-lookup"><span data-stu-id="11a7a-202">To remove an authorization rule</span></span>

1. <span data-ttu-id="11a7a-203">Om Windows PowerShell-sessionen inte redan är öppen, se steg 1 av [att lägga till en regel för begränsad auktorisering](#to-add-a-restrictive-authorization-rule) i det här avsnittet.</span><span class="sxs-lookup"><span data-stu-id="11a7a-203">If a Windows PowerShell session is not already open, see step 1 of [to add a restrictive authorization rule](#to-add-a-restrictive-authorization-rule) in this section.</span></span>

2. <span data-ttu-id="11a7a-204">Skriv följande och tryck sedan på **RETUR**, där *regel-ID* representerar unika ID-numret för regeln som du vill ta bort.</span><span class="sxs-lookup"><span data-stu-id="11a7a-204">Type the following, and then press **Enter**, where *rule ID* represents the unique ID number of the rule that you want to remove.</span></span>

```powershell
Remove-PswaAuthorizationRule -ID <rule ID>
```

<span data-ttu-id="11a7a-205">Alternativt, om du inte känner till ID-numret, men du vet det egna namnet för regeln som du vill ta bort, du kan hämta namnet på regeln och skicka det till den `Remove-PswaAuthorizationRule` för att ta bort regeln, vilket visas i följande exempel: `Get-PswaAuthorizationRule -RuleName <rule-name> | Remove-PswaAuthorizationRule`.</span><span class="sxs-lookup"><span data-stu-id="11a7a-205">Alternatively, if you do not know the ID number, but know the friendly name of the rule you want to remove, you can get the name of the rule, and pipe it to the `Remove-PswaAuthorizationRule` cmdlet to remove the rule, as shown in the following example: `Get-PswaAuthorizationRule -RuleName <rule-name> | Remove-PswaAuthorizationRule`.</span></span>

><span data-ttu-id="11a7a-206">**Obs**:</span><span class="sxs-lookup"><span data-stu-id="11a7a-206">**Note**:</span></span>
>
><span data-ttu-id="11a7a-207">Du uppmanas inte att bekräfta om du vill ta bort den angivna regeln; regeln tas bort när du trycker på **RETUR**.</span><span class="sxs-lookup"><span data-stu-id="11a7a-207">You are not prompted to confirm whether you want to delete the specified authorization rule; the rule is deleted when you press **Enter**.</span></span> <span data-ttu-id="11a7a-208">Du måste vara säker på att du vill ta bort auktoriseringsregeln innan du kör cmdleten `Remove-PswaAuthorizationRule`.</span><span class="sxs-lookup"><span data-stu-id="11a7a-208">Be sure that you want to remove the authorization rule before running the `Remove-PswaAuthorizationRule` cmdlet.</span></span>

#### <a name="other-authorization-rule-scenario-examples"></a><span data-ttu-id="11a7a-209">Andra scenarioexempel på auktoriseringsregler</span><span class="sxs-lookup"><span data-stu-id="11a7a-209">Other authorization rule scenario examples</span></span>

<span data-ttu-id="11a7a-210">Alla Windows PowerShell-session använder en sessionskonfiguration. Om en inte anges för en session använder Windows PowerShell standard, inbyggda Windows PowerShell sessionskonfiguration som kallas Microsoft.PowerShell.</span><span class="sxs-lookup"><span data-stu-id="11a7a-210">Every Windows PowerShell session uses a session configuration; if one is not specified for a session, Windows PowerShell uses the default, built-in Windows PowerShell session configuration, called Microsoft.PowerShell.</span></span> <span data-ttu-id="11a7a-211">Sessionens standardkonfiguration innehåller alla cmdletar som är tillgängliga på en dator.</span><span class="sxs-lookup"><span data-stu-id="11a7a-211">The default session configuration includes all cmdlets that are available on a computer.</span></span> <span data-ttu-id="11a7a-212">Administratörer kan begränsa åtkomsten till alla datorer genom att definiera en sessionskonfiguration med ett begränsat körningsutrymme (ett begränsat antal cmdletar och uppgifter som slutanvändarna kan utföra).</span><span class="sxs-lookup"><span data-stu-id="11a7a-212">Administrators can restrict access to all computers by defining a session configuration with a restricted runspace (a limited range of cmdlets and tasks that their end users could perform).</span></span> <span data-ttu-id="11a7a-213">En användare som beviljas åtkomst till en dator med antingen fullständig språkåtkomst eller endast Windows PowerShell remote management-cmdlets kan ansluta till andra datorer som är anslutna till den första datorn.</span><span class="sxs-lookup"><span data-stu-id="11a7a-213">A user who is granted access to one computer with either full language access or only the Windows PowerShell remote management cmdlets can connect to other computers that are connected to the first computer.</span></span> <span data-ttu-id="11a7a-214">Definiera ett begränsat körningsutrymme kan förhindra användare från att komma åt andra datorer från sina tillåtna runspace i Windows PowerShell och förbättrar säkerheten för din miljö för Windows PowerShell Web Access.</span><span class="sxs-lookup"><span data-stu-id="11a7a-214">Defining a restricted runspace can prevent users from accessing other computers from their allowed Windows PowerShell runspace, and improves the security of your Windows PowerShell Web Access environment.</span></span> <span data-ttu-id="11a7a-215">Sessionskonfigurationen kan distribueras (med hjälp av en grupprincip) till alla datorer som administratörerna vill göra tillgängliga via Windows PowerShell Web Access.</span><span class="sxs-lookup"><span data-stu-id="11a7a-215">The session configuration can be distributed (by using Group Policy) to all computers that administrators want to make accessible through Windows PowerShell Web Access.</span></span> <span data-ttu-id="11a7a-216">Mer information om sessionskonfigurationer finns [about_Session_Configurations](https://technet.microsoft.com/library/dd819508.aspx).</span><span class="sxs-lookup"><span data-stu-id="11a7a-216">For more information about session configurations, see [about_Session_Configurations](https://technet.microsoft.com/library/dd819508.aspx).</span></span>
<span data-ttu-id="11a7a-217">Nedan följer några exempel på det här scenariot.</span><span class="sxs-lookup"><span data-stu-id="11a7a-217">The following are some examples of this scenario.</span></span>

- <span data-ttu-id="11a7a-218">En administratör skapar en slutpunkt som kallas **PswaEndpoint**, med ett begränsat körningsutrymme.</span><span class="sxs-lookup"><span data-stu-id="11a7a-218">An administrator creates an endpoint, called **PswaEndpoint**, with a restricted runspace.</span></span> <span data-ttu-id="11a7a-219">Därefter skapar administratören en regel  **\*,\*, PswaEndpoint**, och distribuerar slutpunkten till andra datorer.</span><span class="sxs-lookup"><span data-stu-id="11a7a-219">Then, the administrator creates a rule, **\*,\*,PswaEndpoint**, and distributes the endpoint to other computers.</span></span> <span data-ttu-id="11a7a-220">Regeln ger alla användare åtkomst till alla datorer med slutpunkten **PswaEndpoint**.</span><span class="sxs-lookup"><span data-stu-id="11a7a-220">The rule allows all users to access all computers with the endpoint **PswaEndpoint**.</span></span> <span data-ttu-id="11a7a-221">Om detta är den enda auktoriseringsregeln som definieras i regeluppsättningen, kommer datorer utan den slutpunkten inte vara åtkomliga.</span><span class="sxs-lookup"><span data-stu-id="11a7a-221">If this is the only authorization rule defined in the rule set, computers without that endpoint would not be accessible.</span></span>

- <span data-ttu-id="11a7a-222">Administratören har skapat en slutpunkt med ett begränsat körningsutrymme som kallas **PswaEndpoint**, och vill begränsa åtkomsten till specifika användare.</span><span class="sxs-lookup"><span data-stu-id="11a7a-222">The administrator created an endpoint with a restricted runspace called **PswaEndpoint**,and wants to restrict access to specific users.</span></span> <span data-ttu-id="11a7a-223">Administratören skapar en grupp av användare som kallas **Level1Support**, och definierar följande regel: **Level1Support,\*, PswaEndpoint**.</span><span class="sxs-lookup"><span data-stu-id="11a7a-223">The administrator creates a group of users called **Level1Support**, and defines the following rule: **Level1Support,\*,PswaEndpoint**.</span></span> <span data-ttu-id="11a7a-224">Den här regeln beviljar alla användare i gruppen **Level1Support** åtkomst till alla datorer med den **PswaEndpoint** konfiguration.</span><span class="sxs-lookup"><span data-stu-id="11a7a-224">The rule grants any users in the group **Level1Support** access to all computers with the **PswaEndpoint** configuration.</span></span> <span data-ttu-id="11a7a-225">På samma sätt kan åtkomst begränsas till en specifik uppsättning datorer.</span><span class="sxs-lookup"><span data-stu-id="11a7a-225">Similarly, access can be restricted to a specific set of computers.</span></span>

- <span data-ttu-id="11a7a-226">Vissa administratörer ger vissa användare mer åtkomst än andra.</span><span class="sxs-lookup"><span data-stu-id="11a7a-226">Some administrators provide certain users more access than others.</span></span> <span data-ttu-id="11a7a-227">Till exempel skapar administratören två användargrupper, **administratörer** och **BasicSupport**.</span><span class="sxs-lookup"><span data-stu-id="11a7a-227">For example, an administrator creates two user groups, **Admins** and **BasicSupport**.</span></span> <span data-ttu-id="11a7a-228">Administratören skapar även en slutpunkt med ett begränsat körningsutrymme som kallas **PswaEndpoint**, och definierar följande två regler: **Admins,\*,\***  och  **BasicSupport,\*, PswaEndpoint**.</span><span class="sxs-lookup"><span data-stu-id="11a7a-228">The administrator also creates an endpoint with a restricted runspace called **PswaEndpoint**, and defines the following two rules: **Admins,\*,\*** and **BasicSupport,\*,PswaEndpoint**.</span></span> <span data-ttu-id="11a7a-229">Den första regeln ger alla användare i den **Admin** åtkomst till alla datorer och den andra regeln ger alla användare i den **BasicSupport** åtkomst till enbart de datorerna som har  **PswaEndpoint**.</span><span class="sxs-lookup"><span data-stu-id="11a7a-229">The first rule provides all users in the **Admin** group access to all computers, and the second rule provides all users in the **BasicSupport** group access only to those computers with **PswaEndpoint**.</span></span>

- <span data-ttu-id="11a7a-230">En administratör har konfigurerat en privat testmiljö och vill ge alla auktoriserade nätverksanvändare åtkomst till alla datorer i nätverket som de normalt har åtkomst till, samt åtkomst alla sessionskonfigurationer som de normalt har åtkomst till.</span><span class="sxs-lookup"><span data-stu-id="11a7a-230">An administrator has set up a private test environment, and wants to allow all authorized network users access to all computers on the network to which they typically have access, with access to all session configurations to which they typically have access.</span></span> <span data-ttu-id="11a7a-231">Eftersom det är en privat testmiljö skapar administratören en auktoriseringsregel som inte är säker.</span><span class="sxs-lookup"><span data-stu-id="11a7a-231">Because this is a private test environment, the administrator creates an authorization rule that is not secure.</span></span>
  - <span data-ttu-id="11a7a-232">Administratören kör cmdleten `Add-PswaAuthorizationRule * * *`, som använder jokertecknet **\*** att representera alla användare, alla datorer och alla konfigurationer.</span><span class="sxs-lookup"><span data-stu-id="11a7a-232">The administrator runs the cmdlet `Add-PswaAuthorizationRule * * *`, which uses the wildcard character **\*** to represent all users, all computers, and all configurations.</span></span>
  - <span data-ttu-id="11a7a-233">Den här regeln motsvarar följande: `Add-PswaAuthorizationRule -UserName * -ComputerName * -ConfigurationName *`.</span><span class="sxs-lookup"><span data-stu-id="11a7a-233">This rule is the equivalent of the following: `Add-PswaAuthorizationRule -UserName * -ComputerName * -ConfigurationName *`.</span></span>

  ><span data-ttu-id="11a7a-234">**Obs**:</span><span class="sxs-lookup"><span data-stu-id="11a7a-234">**Note**:</span></span>
  >
  ><span data-ttu-id="11a7a-235">Den här regeln rekommenderas inte i en säker miljö och kringgår auktoriseringsregelns säkerhetslager som tillhandahålls av Windows PowerShell Web Access.</span><span class="sxs-lookup"><span data-stu-id="11a7a-235">This rule is not recommended in a secure environment, and bypasses the authorization rule layer of security provided by Windows PowerShell Web Access.</span></span>

- <span data-ttu-id="11a7a-236">En administratör måste tillåta att användarna ansluter till måldatorerna i en miljö som innehåller både arbetsgrupper och domäner, där arbetsgruppsdatorer ibland används för att ansluta till måldatorerna i domäner och datorer i domäner ibland används för att ansluta till måldatorerna i arbetsgrupper.</span><span class="sxs-lookup"><span data-stu-id="11a7a-236">An administrator must allow users to connect to target computers in an environment that includes both workgroups and domains, where workgroup computers are occasionally used to connect to target computers in domains, and computers in domains are occasionally used to connect to target computers in workgroups.</span></span> <span data-ttu-id="11a7a-237">Administratören har en gateway-server *PswaServer*, i en arbetsgrupp och måldatorn *srv1.contoso.com* i en domän.</span><span class="sxs-lookup"><span data-stu-id="11a7a-237">The administrator has a gateway server, *PswaServer*, in a workgroup; and target computer *srv1.contoso.com* is in a domain.</span></span> <span data-ttu-id="11a7a-238">Användaren *Chris* är en auktoriserad lokal användare av både arbetsgruppens gateway-server och måldatorn.</span><span class="sxs-lookup"><span data-stu-id="11a7a-238">User *Chris* is an authorized local user on both the workgroup gateway server and the target computer.</span></span> <span data-ttu-id="11a7a-239">Hans användarnamn på arbetsgruppsservern är *chrisLocal*; och hans användarnamn på måldatorn är *contoso\\chris*.</span><span class="sxs-lookup"><span data-stu-id="11a7a-239">His user name on the workgroup server is *chrisLocal*; and his user name on the target computer is *contoso\\chris*.</span></span> <span data-ttu-id="11a7a-240">För att ge åtkomst till srv1.contoso.com för Chris lägger administratören till följande regel.</span><span class="sxs-lookup"><span data-stu-id="11a7a-240">To authorize access to srv1.contoso.com for Chris, the administrator adds the following rule.</span></span>

```powershell
Add-PswaAuthorizationRule -userName PswaServer\chrisLocal -computerName srv1.contoso.com -configurationName Microsoft.PowerShell
```

<span data-ttu-id="11a7a-241">I föregående regelexempel autentiseras Chris på gateway-servern och därefter åtkomsten till *srv1*.</span><span class="sxs-lookup"><span data-stu-id="11a7a-241">The preceding rule example authenticates Chris on the gateway server, and then authorizes his access to *srv1*.</span></span> <span data-ttu-id="11a7a-242">På sidan logga in måste Chris ange en annan uppsättning autentiseringsuppgifter i den **valfria anslutningsinställningar** område (*contoso\\chris*).</span><span class="sxs-lookup"><span data-stu-id="11a7a-242">On the sign-in page, Chris must provide a second set of credentials in the **Optional connection settings** area (*contoso\\chris*).</span></span> <span data-ttu-id="11a7a-243">Gateway-servern använder denna ytterligare uppsättning autentiseringsuppgifter för att autentisera honom på måldatorn, *srv1.contoso.com*.</span><span class="sxs-lookup"><span data-stu-id="11a7a-243">The gateway server uses the additional set of credentials to authenticate him on the target computer, *srv1.contoso.com*.</span></span>

<span data-ttu-id="11a7a-244">I föregående fall upprättar en anslutning till måldatorn av Windows PowerShell Web Access endast när följande har lyckats och tillåts av minst en auktoriseringsregel.</span><span class="sxs-lookup"><span data-stu-id="11a7a-244">In the preceding scenario, Windows PowerShell Web Access establishes a successful connection to the target computer only after the following have been successful, and allowed by at least one authorization rule.</span></span>

1. <span data-ttu-id="11a7a-245">Autentisering för arbetsgruppens gateway-server genom att lägga till ett användarnamn i formatet *server_name*\\*user_name* till auktoriseringsregeln</span><span class="sxs-lookup"><span data-stu-id="11a7a-245">Authentication on the workgroup gateway server by adding a user name in the format *server_name*\\*user_name* to the authorization rule</span></span>

2. <span data-ttu-id="11a7a-246">Autentisering på måldatorn med hjälp av alternativa autentiseringsuppgifter som anges på sidan logga in i den **valfria anslutningsinställningar** område</span><span class="sxs-lookup"><span data-stu-id="11a7a-246">Authentication on the target computer by using alternate credentials provided on the sign-in page, in the **Optional connection settings** area</span></span>

  ><span data-ttu-id="11a7a-247">**Obs**:</span><span class="sxs-lookup"><span data-stu-id="11a7a-247">**Note**:</span></span>
  >
  ><span data-ttu-id="11a7a-248">Om gatewayen och måldatorerna finns i olika arbetsgrupper eller domäner, måste en förtroenderelation upprättas mellan de två arbetsgruppsdatorerna, de två domänerna eller mellan arbetsgruppen och domänen.</span><span class="sxs-lookup"><span data-stu-id="11a7a-248">If gateway and target computers are in different workgroups or domains, a trust relationship must be established between the two workgroup computers, the two domains, or between the workgroup and the domain.</span></span> <span data-ttu-id="11a7a-249">Den här relationen kan inte konfigureras med hjälp av Windows PowerShell Web Access cmdletar för auktoriseringsregeln.</span><span class="sxs-lookup"><span data-stu-id="11a7a-249">This relationship cannot be configured by using Windows PowerShell Web Access authorization rule cmdlets.</span></span> <span data-ttu-id="11a7a-250">Auktoriseringsregler definierar inte en förtroenderelation mellan datorer. De kan bara auktorisera användare till att ansluta till specifika måldatorer och sessionskonfigurationer.</span><span class="sxs-lookup"><span data-stu-id="11a7a-250">Authorization rules do not define a trust relationship between computers; they can only authorize users to connect to specific target computers and session configurations.</span></span> <span data-ttu-id="11a7a-251">Mer information om hur du konfigurerar en förtroenderelation mellan olika domäner finns [skapa domän- och skogsförtroenden](https://technet.microsoft.com/library/cc794775.aspx").</span><span class="sxs-lookup"><span data-stu-id="11a7a-251">For more information about how to configure a trust relationship between different domains, see [Creating Domain and Forest Trusts](https://technet.microsoft.com/library/cc794775.aspx").</span></span> <span data-ttu-id="11a7a-252">Mer information om hur du lägger till arbetsgruppsdatorer i en lista med betrodda värdar finns [fjärrhantering med Serverhanteraren](https://technet.microsoft.com/library/dd759202.aspx)</span><span class="sxs-lookup"><span data-stu-id="11a7a-252">For more information about how to add workgroup computers to a trusted hosts list, see [Remote Management with Server Manager](https://technet.microsoft.com/library/dd759202.aspx)</span></span>

### <a name="using-a-single-set-of-authorization-rules-for-multiple-sites"></a><span data-ttu-id="11a7a-253">Använda en enda uppsättning auktoriseringsregler för flera platser</span><span class="sxs-lookup"><span data-stu-id="11a7a-253">Using a single set of authorization rules for multiple sites</span></span>

<span data-ttu-id="11a7a-254">Auktoriseringsregler lagras i en XML-fil.</span><span class="sxs-lookup"><span data-stu-id="11a7a-254">Authorization rules are stored in an XML file.</span></span> <span data-ttu-id="11a7a-255">Sökväg för XML-filen är som standard _% windir %\\Web\\PowershellWebAccess\\data\\AuthorizationRules.xml_.</span><span class="sxs-lookup"><span data-stu-id="11a7a-255">By default, the path name of the XML file is _%windir%\\Web\\PowershellWebAccess\\data\\AuthorizationRules.xml_.</span></span>

<span data-ttu-id="11a7a-256">Sökvägen till auktoriseringsreglernas XML-fil är lagrad i den **powwa.config** fil som hittas i _% windir %\\Web\\PowershellWebAccess\\data_.</span><span class="sxs-lookup"><span data-stu-id="11a7a-256">The path to the authorization rules XML file is stored in the **powwa.config** file, which is found in _%windir%\\Web\\PowershellWebAccess\\data_.</span></span> <span data-ttu-id="11a7a-257">Administratören har möjlighet att ändra referensen till standardsökvägen i **powwa.config** så att den passar inställningar eller krav.</span><span class="sxs-lookup"><span data-stu-id="11a7a-257">The administrator has the flexibility to change the reference to the default path in **powwa.config** to suit preferences or requirements.</span></span> <span data-ttu-id="11a7a-258">Om administratören har möjlighet att ändra platsen för filen kan flera Windows PowerShell Web Access-gateways använda samma auktoriseringsregler, om en sådan konfiguration önskas.</span><span class="sxs-lookup"><span data-stu-id="11a7a-258">Allowing the administrator to change the location of the file lets multiple Windows PowerShell Web Access gateways use the same authorization rules, if such a configuration is desired.</span></span>

## <a name="session-management"></a><span data-ttu-id="11a7a-259">Sessionshantering</span><span class="sxs-lookup"><span data-stu-id="11a7a-259">Session management</span></span>

<span data-ttu-id="11a7a-260">Som standard begränsar Windows PowerShell Web Access användaren till tre sessioner samtidigt.</span><span class="sxs-lookup"><span data-stu-id="11a7a-260">By default, Windows PowerShell Web Access limits a user to three sessions at one time.</span></span> <span data-ttu-id="11a7a-261">Du kan redigera webbprogrammets **web.config** fil i IIS-hanteraren för att stödja ett annat antal sessioner per användare.</span><span class="sxs-lookup"><span data-stu-id="11a7a-261">You can edit the web application's **web.config** file in IIS Manager to support a different number of sessions per user.</span></span>
<span data-ttu-id="11a7a-262">Sökvägen till den **web.config** filen _$Env: Windir\\Web\\PowerShellWebAccess\\wwwroot\\Web.config_.</span><span class="sxs-lookup"><span data-stu-id="11a7a-262">The path to the **web.config** file is _$Env:Windir\\Web\\PowerShellWebAccess\\wwwroot\\Web.config_.</span></span>

<span data-ttu-id="11a7a-263">Som standard är IIS-webbservern konfigurerad för att starta om programpoolen om några inställningar redigeras.</span><span class="sxs-lookup"><span data-stu-id="11a7a-263">By default, IIS Web Server is configured to restart the application pool if any settings are edited.</span></span> <span data-ttu-id="11a7a-264">Till exempel programpoolen startas om när ändringar görs i **web.config** fil.</span><span class="sxs-lookup"><span data-stu-id="11a7a-264">For example, the application pool is restarted if changes are made to the **web.config** file.</span></span>
><span data-ttu-id="11a7a-265">Eftersom **Windows PowerShell Web Access** använder minnesinterna sessionstillstånd användare är inloggad på **Windows PowerShell Web Access** förlorar sina sessioner när programpoolen startas.</span><span class="sxs-lookup"><span data-stu-id="11a7a-265">Because **Windows PowerShell Web Access** uses in-memory session states, users signed in to **Windows PowerShell Web Access** sessions lose their sessions when the application pool is restarted.</span></span>

### <a name="setting-default-parameters-on-the-sign-in-page"></a><span data-ttu-id="11a7a-266">Ange standardparametrar på inloggningssidan</span><span class="sxs-lookup"><span data-stu-id="11a7a-266">Setting default parameters on the sign-in page</span></span>

<span data-ttu-id="11a7a-267">Om din gateway med Windows PowerShell Web Access körs på Windows Server 2012 R2 kan konfigurera du standardvärden för de inställningar som visas på sidan för Windows PowerShell Web Access.</span><span class="sxs-lookup"><span data-stu-id="11a7a-267">If your Windows PowerShell Web Access gateway is running on Windows Server 2012 R2, you can configure default values for the settings that are displayed on the Windows PowerShell Web Access sign-in page.</span></span> <span data-ttu-id="11a7a-268">Du kan konfigurera värden i den **web.config** fil som beskrevs i föregående stycke.</span><span class="sxs-lookup"><span data-stu-id="11a7a-268">You can configure values in the **web.config** file that is described in the preceding paragraph.</span></span> <span data-ttu-id="11a7a-269">Standardvärdena för inloggningssidans inställningar finns i den **appSettings** avsnitt i filen Web.config; följande är ett exempel på den **appSettings** avsnitt.</span><span class="sxs-lookup"><span data-stu-id="11a7a-269">Default values for the sign-in page settings are found in the **appSettings** section of the web.config file; the following is an example of the **appSettings** section.</span></span> <span data-ttu-id="11a7a-270">Giltiga värden för många av de här inställningarna är samma som för motsvarande parametrar för den [New-PSSession](https://technet.microsoft.com/library/hh849717.aspx) cmdlet i Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="11a7a-270">Valid values for many of these settings are the same as those for the corresponding parameters of the [New-PSSession](https://technet.microsoft.com/library/hh849717.aspx) cmdlet in Windows PowerShell.</span></span>
<span data-ttu-id="11a7a-271">Till exempel den `defaultApplicationName` nyckeln, som visas i följande kodblock, är värdet för den **$PSSessionApplicationName** inställningsvariabeln på måldatorn.</span><span class="sxs-lookup"><span data-stu-id="11a7a-271">For example, the `defaultApplicationName` key, as shown in the following code block, is the value of the **$PSSessionApplicationName** preference variable on the target computer.</span></span>

```xml
    <appSettings>
            <add key="maxSessionsAllowedPerUser" value="3"/>
            <add key="defaultPortNumber" value="5985"/>
            <add key="defaultSSLPortNumber" value="5986"/>
            <add key="defaultApplicationName" value="WSMAN"/>
            <add key="defaultUseSslSelection" value="0"/>
            <add key="defaultAuthenticationType" value="0"/>
            <add key="defaultAllowRedirection" value="0"/>
            <add key="defaultConfigurationName" value="Microsoft.PowerShell"/>
    </appSettings>
```

### <a name="time-outs-and-unplanned-disconnections"></a><span data-ttu-id="11a7a-272">Tidsgränser och oplanerade frånkopplingar</span><span class="sxs-lookup"><span data-stu-id="11a7a-272">Time-outs and unplanned disconnections</span></span>

<span data-ttu-id="11a7a-273">Timeout för Windows PowerShell Web Access-sessioner. I Windows PowerShell Web Access körs på Windows Server 2012, visas ett meddelande om timeout för inloggade användare efter 15 minuters inaktivitet i sessionen.</span><span class="sxs-lookup"><span data-stu-id="11a7a-273">Windows PowerShell Web Access sessions time out. In Windows PowerShell Web Access running on Windows Server 2012, A time-out message is displayed to signed-in users after 15 minutes of session inactivity.</span></span> <span data-ttu-id="11a7a-274">Om användaren inte svarar inom fem minuter efter tidsgränsmeddelandet avslutas sessionen och användaren loggas ut. Du kan ändra tidsgränsperioderna för sessioner i webbplatsinställningarna i IIS-hanteraren.</span><span class="sxs-lookup"><span data-stu-id="11a7a-274">If the user does not respond within five minutes after the time-out message is displayed, the session is ended, and the user is signed out. You can change time-out periods for sessions in the website settings in IIS Manager.</span></span>

<span data-ttu-id="11a7a-275">I Windows PowerShell Web Access körs på Windows Server 2012 R2, tidsgräns för sessioner, som standard efter 20 minuter av inaktivitet.</span><span class="sxs-lookup"><span data-stu-id="11a7a-275">In Windows PowerShell Web Access running on Windows Server 2012 R2, sessions time out, by default, after 20 minutes of inactivity.</span></span> <span data-ttu-id="11a7a-276">Om användarna kopplas från sessioner i den webbaserade konsolen på grund av nätverksfel eller andra oplanerade avstängningar eller fel, och inte eftersom de har stängt sessionerna själva, fortsätta Windows PowerShell Web Access-sessioner köras, ansluten till måldatorerna, tills tidsgränsen på klientsidan uppnås.</span><span class="sxs-lookup"><span data-stu-id="11a7a-276">If users are disconnected from sessions in the web-based console because of network errors or other unplanned shutdowns or failures, and not because they have closed the sessions themselves, the Windows PowerShell Web Access sessions continue to run, connected to target computers, until the time-out period on the client side lapses.</span></span> <span data-ttu-id="11a7a-277">Sessionen kopplas från när antingen standardvärdet 20 minuter eller den tidsperiod som angetts av gateway-administratören uppnås, beroende på vilken som är kortast.</span><span class="sxs-lookup"><span data-stu-id="11a7a-277">The session is disconnected after either the default 20 minutes, or after the time-out period specified by the gateway administrator, whichever is shorter.</span></span>

<span data-ttu-id="11a7a-278">Om gateway-servern kör Windows Server 2012 R2, Windows PowerShell Web Access kan användarna ansluta på nytt till sparade sessioner vid ett senare tillfälle, men när nätverksfel, oplanerade avstängningar eller andra fel kan du koppla från sessioner, användare kan inte se eller återansluta till sparade sessioner förrän efter tidsgränsen som angetts av gateway-administratören har uppnåtts.</span><span class="sxs-lookup"><span data-stu-id="11a7a-278">If the gateway server is running Windows Server 2012 R2, Windows PowerShell Web Access lets users reconnect to saved sessions at a later time, but when network errors, unplanned shutdowns, or other failures disconnect sessions, users cannot see or reconnect to saved sessions until after the time-out period specified by the gateway administrator has lapsed.</span></span>

## <a name="see-also"></a><span data-ttu-id="11a7a-279">Se även</span><span class="sxs-lookup"><span data-stu-id="11a7a-279">See Also</span></span>

- <span data-ttu-id="11a7a-280">[Installera och använda Windows PowerShell-webbåtkomst](https://technet.microsoft.com/library/hh831611(v=ws.11).aspx)</span><span class="sxs-lookup"><span data-stu-id="11a7a-280">[Install and Use Windows PowerShell Web Access](https://technet.microsoft.com/library/hh831611(v=ws.11).aspx)</span></span>
- [<span data-ttu-id="11a7a-281">about_Session_Configurations</span><span class="sxs-lookup"><span data-stu-id="11a7a-281">about_Session_Configurations</span></span>](https://technet.microsoft.com/library/dd819508.aspx)
- [<span data-ttu-id="11a7a-282">Windows PowerShell-cmdletar för Webbåtkomst</span><span class="sxs-lookup"><span data-stu-id="11a7a-282">Windows PowerShell Web Access Cmdlets</span></span>](cmdlets/web-access-cmdlets.md)
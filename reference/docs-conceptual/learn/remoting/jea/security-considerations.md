---
ms.date: 07/10/2019
keywords: Jea, PowerShell, säkerhet
title: JEA säkerhets aspekter
description: Eftersom JEA tillåter dessa användare att köra administrations kommandon utan att ha fullständig administratörs behörighet kan du ta bort dessa användare från privilegierade säkerhets grupper.
ms.openlocfilehash: f65f9d6c6620261de0a9c8de7812637565ca1806
ms.sourcegitcommit: 9080316e3ca4f11d83067b41351531672b667b7a
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/24/2020
ms.locfileid: "92501583"
---
# <a name="jea-security-considerations"></a><span data-ttu-id="a3375-104">JEA säkerhets aspekter</span><span class="sxs-lookup"><span data-stu-id="a3375-104">JEA Security Considerations</span></span>

<span data-ttu-id="a3375-105">JEA hjälper dig att förbättra din säkerhets-position genom att minska antalet permanenta administratörer på dina datorer.</span><span class="sxs-lookup"><span data-stu-id="a3375-105">JEA helps you improve your security posture by reducing the number of permanent administrators on your machines.</span></span> <span data-ttu-id="a3375-106">JEA använder en PowerShell-session konfiguration för att skapa en ny start punkt som användare kan använda för att hantera systemet.</span><span class="sxs-lookup"><span data-stu-id="a3375-106">JEA uses a PowerShell session configuration to create a new entry point for users to manage the system.</span></span> <span data-ttu-id="a3375-107">Användare som behöver förhöjd, men inte obegränsad, åtkomst till datorn för att utföra administrativa uppgifter kan beviljas åtkomst till JEA-slutpunkten.</span><span class="sxs-lookup"><span data-stu-id="a3375-107">Users who need elevated, but not unlimited, access to the machine to do administrative tasks can be granted access to the JEA endpoint.</span></span> <span data-ttu-id="a3375-108">Eftersom JEA tillåter dessa användare att köra administrations kommandon utan att ha fullständig administratörs behörighet kan du ta bort dessa användare från privilegierade säkerhets grupper.</span><span class="sxs-lookup"><span data-stu-id="a3375-108">Since JEA allows these users to run admin commands without having full admin access, you can then remove those users from highly privileged security groups.</span></span>

## <a name="run-as-account"></a><span data-ttu-id="a3375-109">Run-As konto</span><span class="sxs-lookup"><span data-stu-id="a3375-109">Run-As account</span></span>

<span data-ttu-id="a3375-110">Varje JEA-slutpunkt har ett angivet **Kör som-** konto.</span><span class="sxs-lookup"><span data-stu-id="a3375-110">Each JEA endpoint has a designated **run-as** account.</span></span> <span data-ttu-id="a3375-111">Detta är det konto under vilket den anslutande användarens åtgärder utförs.</span><span class="sxs-lookup"><span data-stu-id="a3375-111">This is the account under which the connecting user's actions are executed.</span></span> <span data-ttu-id="a3375-112">Det här kontot kan konfigureras i [konfigurations filen för sessionen](session-configurations.md)och det konto du väljer har stor betydelse för slut punktens säkerhet.</span><span class="sxs-lookup"><span data-stu-id="a3375-112">This account is configurable in the [session configuration file](session-configurations.md), and the account you choose has a significant bearing on the security of your endpoint.</span></span>

<span data-ttu-id="a3375-113">**Virtuella konton** är det rekommenderade sättet att konfigurera **Kör som-** kontot.</span><span class="sxs-lookup"><span data-stu-id="a3375-113">**Virtual accounts** are the recommended way of configuring the **run-as** account.</span></span> <span data-ttu-id="a3375-114">Virtuella konton är temporära, temporära lokala konton som skapas för den anslutande användare som ska användas under hela JEA-sessionen.</span><span class="sxs-lookup"><span data-stu-id="a3375-114">Virtual accounts are one-time, temporary local accounts that are created for the connecting user to use during the duration of their JEA session.</span></span> <span data-ttu-id="a3375-115">Så snart sessionen avslutas, förstörs det virtuella kontot och kan inte användas längre.</span><span class="sxs-lookup"><span data-stu-id="a3375-115">As soon as their session is terminated, the virtual account is destroyed and can't be used anymore.</span></span> <span data-ttu-id="a3375-116">Den anslutande användaren känner inte till autentiseringsuppgifterna för det virtuella kontot.</span><span class="sxs-lookup"><span data-stu-id="a3375-116">The connecting user doesn't know the credentials for the virtual account.</span></span> <span data-ttu-id="a3375-117">Det virtuella kontot kan inte användas för att komma åt systemet via andra sätt som t. ex. fjärr skrivbord eller en obegränsad PowerShell-slutpunkt.</span><span class="sxs-lookup"><span data-stu-id="a3375-117">The virtual account can't be used to access the system via other means like Remote Desktop or an unconstrained PowerShell endpoint.</span></span>

<span data-ttu-id="a3375-118">Som standard tillhör de virtuella kontona den lokala gruppen **Administratörer** på datorn.</span><span class="sxs-lookup"><span data-stu-id="a3375-118">By default, virtual accounts belong to the local **Administrators** group on the machine.</span></span> <span data-ttu-id="a3375-119">Detta ger dem fullständig behörighet att hantera vad som helst i systemet, men inga rättigheter att hantera resurser i nätverket.</span><span class="sxs-lookup"><span data-stu-id="a3375-119">This gives them full rights to manage anything on the system, but no rights to manage resources on the network.</span></span>
<span data-ttu-id="a3375-120">När du autentiserar med andra datorer är användar kontexten för det lokala dator kontot, inte det virtuella kontot.</span><span class="sxs-lookup"><span data-stu-id="a3375-120">When authenticating with other machines, the user context is that of the local computer account, not the virtual account.</span></span>

<span data-ttu-id="a3375-121">Domänkontrollanter är särskilda fall eftersom det inte finns någon lokal **Administratörs** grupp.</span><span class="sxs-lookup"><span data-stu-id="a3375-121">Domain controllers are a special case since there isn't a local **Administrators** group.</span></span> <span data-ttu-id="a3375-122">I stället tillhör de virtuella kontona **domän administratörer** och kan hantera katalog tjänsterna på domänkontrollanten.</span><span class="sxs-lookup"><span data-stu-id="a3375-122">Instead, virtual accounts belong to **Domain Admins** and can manage the directory services on the domain controller.</span></span> <span data-ttu-id="a3375-123">Domän identiteten är fortfarande begränsad för användning på domänkontrollanten där JEA-sessionen instansierades.</span><span class="sxs-lookup"><span data-stu-id="a3375-123">The domain identity is still restricted for use on the domain controller where the JEA session was instantiated.</span></span> <span data-ttu-id="a3375-124">Nätverks åtkomsten visas i stället från domänkontrollantens dator objekt.</span><span class="sxs-lookup"><span data-stu-id="a3375-124">Any network access appears to come from the domain controller computer object instead.</span></span>

<span data-ttu-id="a3375-125">I båda fallen kan du uttryckligen definiera vilka säkerhets grupper som det virtuella kontot tillhör.</span><span class="sxs-lookup"><span data-stu-id="a3375-125">In both cases, you may explicitly define which security groups the virtual account belongs to.</span></span> <span data-ttu-id="a3375-126">Det här är en bra metod när du kan utföra en uppgift utan administratörs behörighet för lokala eller domän administratörer.</span><span class="sxs-lookup"><span data-stu-id="a3375-126">This is a good practice when the task can be done without local or domain admin privileges.</span></span> <span data-ttu-id="a3375-127">Om du redan har definierat en säkerhets grupp för dina administratörer tilldelar du det virtuella kontots medlemskap i gruppen.</span><span class="sxs-lookup"><span data-stu-id="a3375-127">If you already have a security group defined for your admins, grant the virtual account membership to that group.</span></span> <span data-ttu-id="a3375-128">Medlemskap i virtuella konto grupper är begränsat till lokala säkerhets grupper på arbets stationer och medlems servrar.</span><span class="sxs-lookup"><span data-stu-id="a3375-128">Virtual account group membership is limited to local security groups on workstation and member servers.</span></span> <span data-ttu-id="a3375-129">På domänkontrollanter måste virtuella konton vara medlemmar i domän säkerhets grupper.</span><span class="sxs-lookup"><span data-stu-id="a3375-129">On domain controllers, virtual accounts must be members of domain security groups.</span></span>
<span data-ttu-id="a3375-130">När det virtuella kontot har lagts till i en eller flera säkerhets grupper tillhör det inte längre standard grupperna (lokala administratörer eller domän administratörer).</span><span class="sxs-lookup"><span data-stu-id="a3375-130">Once the virtual account has been added to one or more security groups, it no longer belongs to the default groups (local or domain admins).</span></span>

<span data-ttu-id="a3375-131">I följande tabell sammanfattas möjliga konfigurations alternativ och resulterande behörigheter för virtuella konton:</span><span class="sxs-lookup"><span data-stu-id="a3375-131">The following table summarizes the possible configuration options and resulting permissions for virtual accounts:</span></span>

|        <span data-ttu-id="a3375-132">Datortyp</span><span class="sxs-lookup"><span data-stu-id="a3375-132">Computer type</span></span>         | <span data-ttu-id="a3375-133">Konfiguration av virtuellt konto grupp</span><span class="sxs-lookup"><span data-stu-id="a3375-133">Virtual account group configuration</span></span> |                   <span data-ttu-id="a3375-134">Lokal användar kontext</span><span class="sxs-lookup"><span data-stu-id="a3375-134">Local user context</span></span>                    | <span data-ttu-id="a3375-135">Nätverks användar kontext</span><span class="sxs-lookup"><span data-stu-id="a3375-135">Network user context</span></span> |
| ---------------------------- | ----------------------------------- | ------------------------------------------------------- | -------------------- |
| <span data-ttu-id="a3375-136">Domänkontrollant</span><span class="sxs-lookup"><span data-stu-id="a3375-136">Domain controller</span></span>            | <span data-ttu-id="a3375-137">Standard</span><span class="sxs-lookup"><span data-stu-id="a3375-137">Default</span></span>                             | <span data-ttu-id="a3375-138">Domän användare, medlem i "*Domain*\Domain admins"</span><span class="sxs-lookup"><span data-stu-id="a3375-138">Domain user, member of '*DOMAIN*\Domain Admins'</span></span>         | <span data-ttu-id="a3375-139">Dator konto</span><span class="sxs-lookup"><span data-stu-id="a3375-139">Computer account</span></span>     |
| <span data-ttu-id="a3375-140">Domänkontrollant</span><span class="sxs-lookup"><span data-stu-id="a3375-140">Domain controller</span></span>            | <span data-ttu-id="a3375-141">Domän grupper A och B</span><span class="sxs-lookup"><span data-stu-id="a3375-141">Domain groups A and B</span></span>               | <span data-ttu-id="a3375-142">Domän användare, medlem i*domän*\A,*domän*\b</span><span class="sxs-lookup"><span data-stu-id="a3375-142">Domain user, member of '*DOMAIN*\A', '*DOMAIN*\B'</span></span>       | <span data-ttu-id="a3375-143">Dator konto</span><span class="sxs-lookup"><span data-stu-id="a3375-143">Computer account</span></span>     |
| <span data-ttu-id="a3375-144">Medlems Server eller arbets Station</span><span class="sxs-lookup"><span data-stu-id="a3375-144">Member server or workstation</span></span> | <span data-ttu-id="a3375-145">Standard</span><span class="sxs-lookup"><span data-stu-id="a3375-145">Default</span></span>                             | <span data-ttu-id="a3375-146">Lokal användare, medlem i "*Builtin*\Administrators"</span><span class="sxs-lookup"><span data-stu-id="a3375-146">Local user, member of '*BUILTIN*\Administrators'</span></span>        | <span data-ttu-id="a3375-147">Dator konto</span><span class="sxs-lookup"><span data-stu-id="a3375-147">Computer account</span></span>     |
| <span data-ttu-id="a3375-148">Medlems Server eller arbets Station</span><span class="sxs-lookup"><span data-stu-id="a3375-148">Member server or workstation</span></span> | <span data-ttu-id="a3375-149">Lokala grupper C och D</span><span class="sxs-lookup"><span data-stu-id="a3375-149">Local groups C and D</span></span>                | <span data-ttu-id="a3375-150">Lokal användare, medlem i "*Computer*\c" och "*Computer*\d"</span><span class="sxs-lookup"><span data-stu-id="a3375-150">Local user, member of '*COMPUTER*\C' and '*COMPUTER*\D'</span></span> | <span data-ttu-id="a3375-151">Dator konto</span><span class="sxs-lookup"><span data-stu-id="a3375-151">Computer account</span></span>     |

<span data-ttu-id="a3375-152">När du tittar på säkerhets gransknings händelser och program händelse loggar ser du att varje JEA-användarsession har ett unikt virtuellt konto.</span><span class="sxs-lookup"><span data-stu-id="a3375-152">When you look at security audit events and application event logs, you see that each JEA user session has a unique virtual account.</span></span> <span data-ttu-id="a3375-153">Det här unika kontot hjälper dig att spåra användar åtgärder i en JEA-slutpunkt tillbaka till den ursprungliga användare som körde kommandot.</span><span class="sxs-lookup"><span data-stu-id="a3375-153">This unique account helps you track user actions in a JEA endpoint back to the original user who ran the command.</span></span> <span data-ttu-id="a3375-154">Virtuella konto namn följer formatet `WinRM Virtual Users\WinRM_VA_<ACCOUNTNUMBER>_<DOMAIN>_<sAMAccountName>` . om användaren till exempel går **Alice** in i domän **contoso** och startar om en tjänst i en Jea-slutpunkt, är det användar namn som är associerat med alla Service Control Manager-händelser `WinRM Virtual Users\WinRM_VA_1_contoso_alice` .</span><span class="sxs-lookup"><span data-stu-id="a3375-154">Virtual account names follow the format `WinRM Virtual Users\WinRM_VA_<ACCOUNTNUMBER>_<DOMAIN>_<sAMAccountName>` For example, if user **Alice** in domain **Contoso** restarts a service in a JEA endpoint, the username associated with any service control manager events would be `WinRM Virtual Users\WinRM_VA_1_contoso_alice`.</span></span>

<span data-ttu-id="a3375-155">**Grupphanterade tjänst konton (gMSAs)** är användbara när en medlems Server måste ha åtkomst till nätverks resurser i Jea-sessionen.</span><span class="sxs-lookup"><span data-stu-id="a3375-155">**Group-managed service accounts (gMSAs)** are useful when a member server needs to have access to network resources in the JEA session.</span></span> <span data-ttu-id="a3375-156">Till exempel när en JEA-slutpunkt används för att styra åtkomsten till en REST API tjänst som finns på en annan dator.</span><span class="sxs-lookup"><span data-stu-id="a3375-156">For example, when a JEA endpoint is used to control access to a REST API service hosted on a different machine.</span></span> <span data-ttu-id="a3375-157">Det är enkelt att skriva funktioner för att anropa REST-API: er, men du behöver en nätverks identitet för att autentisera med API: et.</span><span class="sxs-lookup"><span data-stu-id="a3375-157">It's easy to write functions to invoke the REST APIs, but you need a network identity to authenticate with the API.</span></span> <span data-ttu-id="a3375-158">Genom att använda ett grupphanterat tjänst konto gör du det andra hoppet möjligt samtidigt som du behåller kontrollen över vilka datorer som kan använda kontot.</span><span class="sxs-lookup"><span data-stu-id="a3375-158">Using a group-managed service account makes the second hop possible while maintaining control over which computers can use the account.</span></span> <span data-ttu-id="a3375-159">De gällande behörigheterna för gMSA definieras av de säkerhets grupper (lokala eller domän) som gMSA-kontot tillhör.</span><span class="sxs-lookup"><span data-stu-id="a3375-159">The effective permissions of the gMSA are defined by the security groups (local or domain) to which the gMSA account belongs.</span></span>

<span data-ttu-id="a3375-160">När en JEA-slutpunkt har kon figurer ATS för att använda en gMSA, verkar åtgärderna för alla JEA-användare komma från samma gMSA.</span><span class="sxs-lookup"><span data-stu-id="a3375-160">When a JEA endpoint is configured to use a gMSA, the actions of all JEA users appear to come from the same gMSA.</span></span> <span data-ttu-id="a3375-161">Det enda sättet att spåra åtgärder tillbaka till en bestämd användare är att identifiera de kommandon som körs i en avskrift för en PowerShell-session.</span><span class="sxs-lookup"><span data-stu-id="a3375-161">The only way to trace actions back to a specific user is to identify the set of commands run in a PowerShell session transcript.</span></span>

<span data-ttu-id="a3375-162">**Direkt inloggnings uppgifter** används när du inte anger ett **Kör som-** konto.</span><span class="sxs-lookup"><span data-stu-id="a3375-162">**Pass-thru credentials** are used when you don't specify a **run-as** account.</span></span> <span data-ttu-id="a3375-163">PowerShell använder den anslutande användarens autentiseringsuppgift för att köra kommandon på fjärrservern.</span><span class="sxs-lookup"><span data-stu-id="a3375-163">PowerShell uses the connecting user's credential to run commands on the remote server.</span></span> <span data-ttu-id="a3375-164">Detta kräver att du ger den anslutande användaren direkt åtkomst till privilegierade hanterings grupper.</span><span class="sxs-lookup"><span data-stu-id="a3375-164">This requires you to grant the connecting user direct access to privileged management groups.</span></span> <span data-ttu-id="a3375-165">Den här konfigurationen rekommenderas **inte** för Jea.</span><span class="sxs-lookup"><span data-stu-id="a3375-165">This configuration is **not** recommended for JEA.</span></span> <span data-ttu-id="a3375-166">Om den anslutna användaren redan har administratörs behörighet kan de undvika JEA och hantera systemet via andra, obegränsade medel.</span><span class="sxs-lookup"><span data-stu-id="a3375-166">If the connecting user already has admin privileges, they can avoid JEA and manage the system via other, unconstrained means.</span></span> <span data-ttu-id="a3375-167">Mer information finns i avsnittet nedan om hur [Jea inte skyddar mot administratörer](#jea-doesnt-protect-against-admins).</span><span class="sxs-lookup"><span data-stu-id="a3375-167">For more information, see the section below on how [JEA doesn't protect against admins](#jea-doesnt-protect-against-admins).</span></span>

<span data-ttu-id="a3375-168">Med **standard kör som-konton** kan du ange vilket användar konto som hela PowerShell-sessionen ska köras under.</span><span class="sxs-lookup"><span data-stu-id="a3375-168">**Standard run-as accounts** allow you to specify any user account under which the entire PowerShell session runs.</span></span> <span data-ttu-id="a3375-169">Sessionshantering som använder fasta **Kör som** -konton (med `-RunAsCredential` parametern) är inte Jea-medvetna.</span><span class="sxs-lookup"><span data-stu-id="a3375-169">Session configurations using fixed **run-as** accounts (with the `-RunAsCredential` parameter) aren't JEA-aware.</span></span> <span data-ttu-id="a3375-170">Roll definitionerna fungerar inte längre som förväntat.</span><span class="sxs-lookup"><span data-stu-id="a3375-170">Role definitions no longer function as expected.</span></span> <span data-ttu-id="a3375-171">Alla användare som har behörighet att komma åt slut punkten tilldelas samma roll.</span><span class="sxs-lookup"><span data-stu-id="a3375-171">Every user authorized to access the endpoint is assigned the same role.</span></span>

<span data-ttu-id="a3375-172">Du bör inte använda en **RunAsCredential** på en Jea-slutpunkt eftersom det är svårt att spåra åtgärder tillbaka till vissa användare och saknar stöd för mappning av användare till roller.</span><span class="sxs-lookup"><span data-stu-id="a3375-172">You shouldn't use a **RunAsCredential** on a JEA endpoint because it's difficult to trace actions back to specific users and lacks support for mapping users to roles.</span></span>

## <a name="winrm-endpoint-acl"></a><span data-ttu-id="a3375-173">Åtkomst kontrol lista för WinRM-slutpunkt</span><span class="sxs-lookup"><span data-stu-id="a3375-173">WinRM Endpoint ACL</span></span>

<span data-ttu-id="a3375-174">Precis som med vanliga PowerShell-slutpunkter för fjärrkommunikation har varje JEA-slutpunkt en separat åtkomst kontrol lista (ACL) som styr vem som kan autentisera med JEA-slutpunkten.</span><span class="sxs-lookup"><span data-stu-id="a3375-174">As with regular PowerShell remoting endpoints, each JEA endpoint has a separate access control list (ACL) that controls who can authenticate with the JEA endpoint.</span></span> <span data-ttu-id="a3375-175">Om det är felaktigt konfigurerat kanske betrodda användare inte kan komma åt JEA-slutpunkten och ej betrodda användare kan ha åtkomst.</span><span class="sxs-lookup"><span data-stu-id="a3375-175">If improperly configured, trusted users may not be able to access the JEA endpoint and untrusted users may have access.</span></span> <span data-ttu-id="a3375-176">WinRM ACL påverkar inte mappningen av användare till JEA-roller.</span><span class="sxs-lookup"><span data-stu-id="a3375-176">The WinRM ACL doesn't affect the mapping of users to JEA roles.</span></span> <span data-ttu-id="a3375-177">Mappningen styrs av fältet **RoleDefinitions** i den session konfigurations fil som används för att registrera slut punkten.</span><span class="sxs-lookup"><span data-stu-id="a3375-177">Mapping is controlled by the **RoleDefinitions** field in the session configuration file used to register the endpoint.</span></span>

<span data-ttu-id="a3375-178">Som standard konfigureras WinRM ACL som standard för att tillåta åtkomst till alla mappade användare när en JEA-slutpunkt har flera roll funktioner.</span><span class="sxs-lookup"><span data-stu-id="a3375-178">By default, when a JEA endpoint has multiple role capabilities, the WinRM ACL is configured to allow access to all mapped users.</span></span> <span data-ttu-id="a3375-179">En JEA-session som kon figurer ATS med hjälp av följande kommandon ger till exempel fullständig åtkomst till `CONTOSO\JEA_Lev1` och `CONTOSO\JEA_Lev2` .</span><span class="sxs-lookup"><span data-stu-id="a3375-179">For example, a JEA session configured using the following commands grants full access to `CONTOSO\JEA_Lev1` and `CONTOSO\JEA_Lev2`.</span></span>

```powershell
$roles = @{ 'CONTOSO\JEA_Lev1' = 'Lev1Role'; 'CONTOSO\JEA_Lev2' = 'Lev2Role' }
New-PSSessionConfigurationFile -Path '.\jea.pssc' -SessionType RestrictedRemoteServer -RoleDefinitions $roles -RunAsVirtualAccount
Register-PSSessionConfiguration -Path '.\jea.pssc' -Name 'MyJEAEndpoint'
```

<span data-ttu-id="a3375-180">Du kan granska användar behörigheter med cmdleten [Get-PSSessionConfiguration](/powershell/module/microsoft.powershell.core/get-pssessionconfiguration) .</span><span class="sxs-lookup"><span data-stu-id="a3375-180">You can audit user permissions with the [Get-PSSessionConfiguration](/powershell/module/microsoft.powershell.core/get-pssessionconfiguration) cmdlet.</span></span>

```powershell
Get-PSSessionConfiguration -Name 'MyJEAEndpoint' | Select-Object Permission
```

```Output
Permission
----------
CONTOSO\JEA_Lev1 AccessAllowed
CONTOSO\JEA_Lev2 AccessAllowed
```

<span data-ttu-id="a3375-181">Om du vill ändra vilka användare som har åtkomst kör du antingen `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -ShowSecurityDescriptorUI` för en interaktiv prompt eller `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -SecurityDescriptorSddl <SDDL string>` uppdaterar behörigheterna.</span><span class="sxs-lookup"><span data-stu-id="a3375-181">To change which users have access, run either `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -ShowSecurityDescriptorUI` for an interactive prompt or `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -SecurityDescriptorSddl <SDDL string>` to update the permissions.</span></span> <span data-ttu-id="a3375-182">Användare behöver minst *Invoke* -rättigheter för att få åtkomst till Jea-slutpunkten.</span><span class="sxs-lookup"><span data-stu-id="a3375-182">Users need at least *Invoke* rights to access the JEA endpoint.</span></span>

<span data-ttu-id="a3375-183">Det är möjligt att skapa en JEA-slutpunkt som inte mappar en definierad roll till alla användare som har åtkomst.</span><span class="sxs-lookup"><span data-stu-id="a3375-183">It's possible to create a JEA endpoint that doesn't map a defined role to every user that has access.</span></span> <span data-ttu-id="a3375-184">Dessa användare kan starta en JEA-session, men har bara åtkomst till standard-cmdletarna.</span><span class="sxs-lookup"><span data-stu-id="a3375-184">These users can start a JEA session, but only have access to the default cmdlets.</span></span> <span data-ttu-id="a3375-185">Du kan granska användar behörigheter i en JEA-slutpunkt genom att köra `Get-PSSessionCapability` .</span><span class="sxs-lookup"><span data-stu-id="a3375-185">You can audit user permissions in a JEA endpoint by running `Get-PSSessionCapability`.</span></span> <span data-ttu-id="a3375-186">Mer information finns i [granskning och rapportering på Jea](audit-and-report.md).</span><span class="sxs-lookup"><span data-stu-id="a3375-186">For more information, see [Auditing and Reporting on JEA](audit-and-report.md).</span></span>

## <a name="least-privilege-roles"></a><span data-ttu-id="a3375-187">Roller för minsta behörighet</span><span class="sxs-lookup"><span data-stu-id="a3375-187">Least privilege roles</span></span>

<span data-ttu-id="a3375-188">När du skapar JEA-roller är det viktigt att komma ihåg att de virtuella och grupphanterade tjänst konton som körs i bakgrunden kan ha obegränsad åtkomst till den lokala datorn.</span><span class="sxs-lookup"><span data-stu-id="a3375-188">When designing JEA roles, it's important to remember that the virtual and group-managed service accounts running behind the scenes can have unrestricted access to the local machine.</span></span> <span data-ttu-id="a3375-189">JEA-rollens funktioner begränsar de kommandon och program som kan köras i den privilegierade kontexten.</span><span class="sxs-lookup"><span data-stu-id="a3375-189">JEA role capabilities help limit the commands and applications that can be run in that privileged context.</span></span>
<span data-ttu-id="a3375-190">Felaktigt utformade roller kan tillåta farliga kommandon som kan ge en användare möjlighet att ta del av JEA-gränser eller få åtkomst till känslig information.</span><span class="sxs-lookup"><span data-stu-id="a3375-190">Improperly designed roles can allow dangerous commands that may permit a user to break out of the JEA boundaries or obtain access to sensitive information.</span></span>

<span data-ttu-id="a3375-191">Anta till exempel följande roll kapacitets post:</span><span class="sxs-lookup"><span data-stu-id="a3375-191">For example, consider the following role capability entry:</span></span>

```powershell
@{
    VisibleCmdlets = 'Microsoft.PowerShell.Management\*-Process'
}
```

<span data-ttu-id="a3375-192">Med den här rollen kan användarna köra alla PowerShell-cmdletar i Substantiv- **processen** från modulen **Microsoft. PowerShell. Management** .</span><span class="sxs-lookup"><span data-stu-id="a3375-192">This role capability allows users to run any PowerShell cmdlet with the noun **Process** from the **Microsoft.PowerShell.Management** module.</span></span> <span data-ttu-id="a3375-193">Användare kan behöva åtkomst till cmdletar som `Get-Process` för att se vilka program som körs i systemet och `Stop-Process` för att stoppa program som inte svarar.</span><span class="sxs-lookup"><span data-stu-id="a3375-193">Users may need to access cmdlets like `Get-Process` to see what applications are running on the system and `Stop-Process` to kill applications that aren't responding.</span></span> <span data-ttu-id="a3375-194">Posten tillåter dock också `Start-Process` , som kan användas för att starta ett godtyckligt program med fullständiga administratörs behörigheter.</span><span class="sxs-lookup"><span data-stu-id="a3375-194">However, this entry also allows `Start-Process`, which can be used to start up an arbitrary program with full administrator permissions.</span></span> <span data-ttu-id="a3375-195">Programmet behöver inte installeras lokalt på systemet.</span><span class="sxs-lookup"><span data-stu-id="a3375-195">The program doesn't need to be installed locally on the system.</span></span> <span data-ttu-id="a3375-196">En ansluten användare kan starta ett program från en fil resurs som ger användaren lokal administratörs behörighet, kör skadlig kod och mer.</span><span class="sxs-lookup"><span data-stu-id="a3375-196">A connected user could start a program from a file share that gives the user local admin privileges, runs malware, and more.</span></span>

<span data-ttu-id="a3375-197">En säkrare version av samma roll kapacitet skulle se ut så här:</span><span class="sxs-lookup"><span data-stu-id="a3375-197">A more secure version of this same role capability would look like:</span></span>

```powershell
@{
    VisibleCmdlets = 'Microsoft.PowerShell.Management\Get-Process', 'Microsoft.PowerShell.Management\Stop-Process'
}
```

<span data-ttu-id="a3375-198">Undvik att använda jokertecken i roll funktionerna.</span><span class="sxs-lookup"><span data-stu-id="a3375-198">Avoid using wildcards in role capabilities.</span></span> <span data-ttu-id="a3375-199">Se till att regelbundet [Granska gällande användar behörigheter](audit-and-report.md#check-effective-rights-for-a-specific-user) för att förstå vilka kommandon som är tillgängliga för användaren.</span><span class="sxs-lookup"><span data-stu-id="a3375-199">Be sure to regularly [audit effective user permissions](audit-and-report.md#check-effective-rights-for-a-specific-user) to understand which commands are accessible to the user.</span></span>

## <a name="jea-doesnt-protect-against-admins"></a><span data-ttu-id="a3375-200">JEA skyddar inte mot administratörer</span><span class="sxs-lookup"><span data-stu-id="a3375-200">JEA doesn't protect against admins</span></span>

<span data-ttu-id="a3375-201">En av grund principerna för JEA är att den tillåter icke-administratörer att utföra vissa administrativa uppgifter.</span><span class="sxs-lookup"><span data-stu-id="a3375-201">One of the core principles of JEA is that it allows non-admins to do some admin tasks.</span></span> <span data-ttu-id="a3375-202">JEA skyddar inte mot användare som redan har administratörs behörighet.</span><span class="sxs-lookup"><span data-stu-id="a3375-202">JEA doesn't protect against users who already have administrator privileges.</span></span> <span data-ttu-id="a3375-203">Användare som tillhör **domän administratörer**, lokala **Administratörer**eller andra privilegierade grupper kan kringgå Jea skydd på ett annat sätt.</span><span class="sxs-lookup"><span data-stu-id="a3375-203">Users who belong **Domain Admins**, local **Administrators**, or other highly privileged groups can circumvent JEA's protections via another means.</span></span> <span data-ttu-id="a3375-204">De kan till exempel Logga in med RDP, använda fjärranslutna MMC-konsoler eller ansluta till obegränsade PowerShell-slutpunkter.</span><span class="sxs-lookup"><span data-stu-id="a3375-204">For example, they could sign in with RDP, use remote MMC consoles, or connect to unconstrained PowerShell endpoints.</span></span> <span data-ttu-id="a3375-205">Lokala administratörer på ett system kan också ändra JEA-konfigurationer för att tillåta ytterligare användare eller ändra en roll kapacitet för att utöka omfattningen av vad en användare kan göra i sin JEA-session.</span><span class="sxs-lookup"><span data-stu-id="a3375-205">Also, local admins on a system can modify JEA configurations to allow additional users or change a role capability to extend the scope of what a user can do in their JEA session.</span></span> <span data-ttu-id="a3375-206">Det är viktigt att utvärdera dina JEA-användares utökade behörigheter för att se om det finns andra sätt att få privilegie rad åtkomst till systemet.</span><span class="sxs-lookup"><span data-stu-id="a3375-206">It's important to evaluate your JEA users' extended permissions to see if there are other ways to gain privileged access to the system.</span></span>

<span data-ttu-id="a3375-207">En vanlig metod är att använda JEA för vanlig daglig underhåll och har en just-in-Time-, Privileged Access Management-lösning som gör det möjligt för användare att tillfälligt bli lokala administratörer i nödfalls situationer.</span><span class="sxs-lookup"><span data-stu-id="a3375-207">A common practice is to use JEA for regular day-to-day maintenance and have a just-in-time, privileged access management solution that allows users to temporarily become local admins in emergency situations.</span></span> <span data-ttu-id="a3375-208">På så sätt ser du till att användarna inte är permanenta administratörer i systemet, men kan hämta dessa rättigheter om och bara när de slutför ett arbets flöde som dokumenterar deras användning av dessa behörigheter.</span><span class="sxs-lookup"><span data-stu-id="a3375-208">This helps ensure users aren't permanent admins on the system, but can get those rights if, and only when, they complete a workflow that documents their use of those permissions.</span></span>

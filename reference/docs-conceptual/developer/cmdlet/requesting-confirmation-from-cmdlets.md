---
ms.date: 09/13/2016
ms.topic: reference
title: Begära bekräftelse från cmdlets
description: Begära bekräftelse från cmdlets
ms.openlocfilehash: fd869d50b185cb4d38269640df58ec284a32da50
ms.sourcegitcommit: ba7315a496986451cfc1296b659d73ea2373d3f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 12/10/2020
ms.locfileid: "92646410"
---
# <a name="requesting-confirmation-from-cmdlets"></a><span data-ttu-id="8f4fb-103">Begära bekräftelse från cmdlets</span><span class="sxs-lookup"><span data-stu-id="8f4fb-103">Requesting Confirmation from Cmdlets</span></span>

<span data-ttu-id="8f4fb-104">Cmdlets bör begära bekräftelse när de ska göra en ändring i systemet som ligger utanför Windows PowerShell-miljön.</span><span class="sxs-lookup"><span data-stu-id="8f4fb-104">Cmdlets should request confirmation when they are about to make a change to the system that is outside of the Windows PowerShell environment.</span></span> <span data-ttu-id="8f4fb-105">Om en cmdlet till exempel ska lägga till ett användar konto eller stoppa en process, måste cmdleten kräva bekräftelse från användaren innan den kan fortsätta.</span><span class="sxs-lookup"><span data-stu-id="8f4fb-105">For example, if a cmdlet is about to add a user account or stop a process, the cmdlet should require confirmation from the user before it proceeds.</span></span> <span data-ttu-id="8f4fb-106">Om en cmdlet är i färd med att ändra en Windows PowerShell-variabel behöver cmdleten däremot inte kräva bekräftelse.</span><span class="sxs-lookup"><span data-stu-id="8f4fb-106">In contrast, if a cmdlet is about to change a Windows PowerShell variable, the cmdlet does not need to require confirmation.</span></span>

<span data-ttu-id="8f4fb-107">För att kunna göra en bekräftelse förfrågan måste cmdleten ange att den stöder bekräftelse begär Anden och måste anropa metoden [system. Management. Automation. cmdlet. ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) och [system. Management. Automation. cmdlet. ShouldContinue](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) (valfritt) för att visa ett bekräftelse meddelande.</span><span class="sxs-lookup"><span data-stu-id="8f4fb-107">In order to make a confirmation request, the cmdlet must indicate that it supports confirmation requests, and it must call the [System.Management.Automation.Cmdlet.ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) and [System.Management.Automation.Cmdlet.ShouldContinue](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) (optional) methods to display a confirmation request message.</span></span>

## <a name="supporting-confirmation-requests"></a><span data-ttu-id="8f4fb-108">Support bekräftelse begär Anden</span><span class="sxs-lookup"><span data-stu-id="8f4fb-108">Supporting Confirmation Requests</span></span>

<span data-ttu-id="8f4fb-109">För att stödja bekräftelse begär Anden måste cmdleten ange `SupportsShouldProcess` parametern för cmdlet-attributet till `true` .</span><span class="sxs-lookup"><span data-stu-id="8f4fb-109">To support confirmation requests, the cmdlet must set the `SupportsShouldProcess` parameter of the Cmdlet attribute to `true`.</span></span> <span data-ttu-id="8f4fb-110">Detta aktiverar `Confirm` parametrarna och för `WhatIf` cmdleten som tillhandahålls av Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="8f4fb-110">This enables the `Confirm` and `WhatIf` cmdlet parameters that are provided by Windows PowerShell.</span></span> <span data-ttu-id="8f4fb-111">`Confirm`Parametern gör det möjligt för användaren att kontrol lera om bekräftelse förfrågningen visas.</span><span class="sxs-lookup"><span data-stu-id="8f4fb-111">The `Confirm` parameter allows the user to control whether the confirmation request is displayed.</span></span> <span data-ttu-id="8f4fb-112">`WhatIf`Parametern låter användaren avgöra om cmdleten ska visa ett meddelande eller utföra åtgärden.</span><span class="sxs-lookup"><span data-stu-id="8f4fb-112">The `WhatIf` parameter allows the user to determine whether the cmdlet should display a message or perform its action.</span></span> <span data-ttu-id="8f4fb-113">Lägg inte till `Confirm` parametrarna och manuellt `WhatIf` i en cmdlet.</span><span class="sxs-lookup"><span data-stu-id="8f4fb-113">Do not manually add the `Confirm` and `WhatIf` parameters to a cmdlet.</span></span>

<span data-ttu-id="8f4fb-114">I följande exempel visas en deklaration för cmdlet-attribut som stöder bekräftelse begär Anden.</span><span class="sxs-lookup"><span data-stu-id="8f4fb-114">The following example shows a Cmdlet attribute declaration that supports confirmation requests.</span></span>

```csharp
[Cmdlet(VerbsDiagnostic.Test, "RequestConfirmationTemplate1",
        SupportsShouldProcess = true)]
```

## <a name="calling-the-confirmation-request-methods"></a><span data-ttu-id="8f4fb-115">Anropar metoder för bekräftelse av begäran</span><span class="sxs-lookup"><span data-stu-id="8f4fb-115">Calling the Confirmation request methods</span></span>

<span data-ttu-id="8f4fb-116">I cmdlet-koden anropar du metoden [system. Management. Automation. cmdlet. ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) innan åtgärden som ändrar systemet utförs.</span><span class="sxs-lookup"><span data-stu-id="8f4fb-116">In the cmdlet code, call the [System.Management.Automation.Cmdlet.ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) method before the operation that changes the system is performed.</span></span> <span data-ttu-id="8f4fb-117">Utforma cmdleten så att om anropet returnerar värdet `false` , utförs inte åtgärden och cmdleten bearbetar nästa åtgärd.</span><span class="sxs-lookup"><span data-stu-id="8f4fb-117">Design the cmdlet so that if the call returns a value of `false`, the operation is not performed, and the cmdlet processes the next operation.</span></span>

## <a name="calling-the-shouldcontinue-method"></a><span data-ttu-id="8f4fb-118">Anropar metoden ShouldContinue</span><span class="sxs-lookup"><span data-stu-id="8f4fb-118">Calling the ShouldContinue Method</span></span>

<span data-ttu-id="8f4fb-119">De flesta cmdletar begär bekräftelse med hjälp av metoden [system. Management. Automation. cmdlet. ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) .</span><span class="sxs-lookup"><span data-stu-id="8f4fb-119">Most cmdlets request confirmation using only the [System.Management.Automation.Cmdlet.ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) method.</span></span> <span data-ttu-id="8f4fb-120">Vissa fall kan dock kräva ytterligare bekräftelse.</span><span class="sxs-lookup"><span data-stu-id="8f4fb-120">However, some cases might require additional confirmation.</span></span> <span data-ttu-id="8f4fb-121">I dessa fall ska du komplettera [system. Management. Automation. cmdlet. ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) -anropet med ett anrop till metoden [system. Management. Automation. cmdlet. ShouldContinue](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) .</span><span class="sxs-lookup"><span data-stu-id="8f4fb-121">For these cases, supplement the [System.Management.Automation.Cmdlet.ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) call with a call to the [System.Management.Automation.Cmdlet.ShouldContinue](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) method.</span></span> <span data-ttu-id="8f4fb-122">Detta gör att cmdleten eller providern kan styra omfånget för **Ja till alla** svar på bekräftelse meddelandet.</span><span class="sxs-lookup"><span data-stu-id="8f4fb-122">This allows the cmdlet or provider to more finely control the scope of the **Yes to all** response to the confirmation prompt.</span></span>

<span data-ttu-id="8f4fb-123">Om en cmdlet anropar metoden [system. Management. Automation. cmdlet. ShouldContinue](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) , måste cmdleten också tillhandahålla en `Force` switch-parameter.</span><span class="sxs-lookup"><span data-stu-id="8f4fb-123">If a cmdlet calls the [System.Management.Automation.Cmdlet.ShouldContinue](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) method, the cmdlet must also provide a `Force` switch parameter.</span></span> <span data-ttu-id="8f4fb-124">Om användaren anger `Force` när användaren anropar cmdleten bör cmdleten fortfarande anropa [system. Management. Automation. cmdlet. ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess), men det bör kringgå anropet till [system. Management. Automation. cmdlet. ShouldContinue](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue).</span><span class="sxs-lookup"><span data-stu-id="8f4fb-124">If the user specifies `Force` when the user invokes the cmdlet, the cmdlet should still call [System.Management.Automation.Cmdlet.ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess), but it should bypass the call to [System.Management.Automation.Cmdlet.ShouldContinue](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue).</span></span>

<span data-ttu-id="8f4fb-125">[System. Management. Automation. cmdlet. ShouldContinue](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) kommer att utlösa ett undantag när det anropas från en icke-interaktiv miljö där användaren inte kan uppmanas att göra det.</span><span class="sxs-lookup"><span data-stu-id="8f4fb-125">[System.Management.Automation.Cmdlet.ShouldContinue](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) will throw an exception when it is called from a non-interactive environment where the user cannot be prompted.</span></span> <span data-ttu-id="8f4fb-126">Genom att lägga till en `Force` parameter ser du till att kommandot fortfarande kan utföras när det anropas i en icke-interaktiv miljö.</span><span class="sxs-lookup"><span data-stu-id="8f4fb-126">Adding a `Force` parameter ensures that the command can still be performed when it is invoked in a non-interactive environment.</span></span>

<span data-ttu-id="8f4fb-127">Följande exempel visar hur du anropar [system. Management. Automation. cmdlet. ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) och [system. Management. Automation. cmdlet. ShouldContinue](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue).</span><span class="sxs-lookup"><span data-stu-id="8f4fb-127">The following example shows how to call [System.Management.Automation.Cmdlet.ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) and [System.Management.Automation.Cmdlet.ShouldContinue](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue).</span></span>

```csharp
if (ShouldProcess (...) )
{
  if (Force || ShouldContinue(...))
  {
     // Add code that performs the operation.
  }
}
```

<span data-ttu-id="8f4fb-128">Beteendet för ett [system. Management. Automation. cmdlet. ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) -anrop kan variera beroende på i vilken miljö cmdleten anropas.</span><span class="sxs-lookup"><span data-stu-id="8f4fb-128">The behavior of a [System.Management.Automation.Cmdlet.ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) call can vary depending on the environment in which the cmdlet is invoked.</span></span> <span data-ttu-id="8f4fb-129">Genom att följa de tidigare rikt linjerna kan du se till att cmdleten fungerar konsekvent med andra cmdlets, oavsett värd miljö.</span><span class="sxs-lookup"><span data-stu-id="8f4fb-129">Using the previous guidelines will help ensure that the cmdlet behaves consistently with other cmdlets, regardless of the host environment.</span></span>

<span data-ttu-id="8f4fb-130">Ett exempel på hur du anropar metoden [system. Management. Automation. cmdlet. ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) finns i [så här begär du bekräftelser](./how-to-request-confirmations.md).</span><span class="sxs-lookup"><span data-stu-id="8f4fb-130">For an example of calling the [System.Management.Automation.Cmdlet.ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) method, see [How to Request Confirmations](./how-to-request-confirmations.md).</span></span>

## <a name="specify-the-impact-level"></a><span data-ttu-id="8f4fb-131">Ange effekt nivå</span><span class="sxs-lookup"><span data-stu-id="8f4fb-131">Specify the Impact Level</span></span>

<span data-ttu-id="8f4fb-132">När du skapar cmdleten anger du effekt nivån (allvarlighets grad) för ändringen.</span><span class="sxs-lookup"><span data-stu-id="8f4fb-132">When you create the cmdlet, specify the impact level (the severity) of the change.</span></span> <span data-ttu-id="8f4fb-133">Det gör du genom att ange värdet för `ConfirmImpact` parametern för cmdlet-attributet till hög, medel eller låg.</span><span class="sxs-lookup"><span data-stu-id="8f4fb-133">To do this, set the value of the `ConfirmImpact` parameter of the Cmdlet attribute to High, Medium, or Low.</span></span> <span data-ttu-id="8f4fb-134">Du kan endast ange ett värde för `ConfirmImpact` när du också anger `SupportsShouldProcess` parametern för cmdleten.</span><span class="sxs-lookup"><span data-stu-id="8f4fb-134">You can specify a value for `ConfirmImpact` only when you also specify the `SupportsShouldProcess` parameter for the cmdlet.</span></span>

<span data-ttu-id="8f4fb-135">För de flesta cmdletar behöver du inte uttryckligen ange `ConfirmImpact` .</span><span class="sxs-lookup"><span data-stu-id="8f4fb-135">For most cmdlets, you do not have to explicitly specify `ConfirmImpact`.</span></span>  <span data-ttu-id="8f4fb-136">Använd istället standard inställningen för parametern, som är medel.</span><span class="sxs-lookup"><span data-stu-id="8f4fb-136">Instead, use the default setting of the parameter, which is Medium.</span></span> <span data-ttu-id="8f4fb-137">Om du ställer in `ConfirmImpact` till hög bekräftas åtgärden som standard.</span><span class="sxs-lookup"><span data-stu-id="8f4fb-137">If you set `ConfirmImpact` to High, the operation will be confirmed by default.</span></span> <span data-ttu-id="8f4fb-138">Reservera den här inställningen för mycket störande åtgärder, till exempel att omformatera en hård disk volym.</span><span class="sxs-lookup"><span data-stu-id="8f4fb-138">Reserve this setting for highly disruptive actions, such as reformatting a hard-disk volume.</span></span>

## <a name="calling-non-confirmation-methods"></a><span data-ttu-id="8f4fb-139">Anropar icke-bekräftelse metoder</span><span class="sxs-lookup"><span data-stu-id="8f4fb-139">Calling Non-Confirmation Methods</span></span>

<span data-ttu-id="8f4fb-140">Om cmdleten eller providern måste skicka ett meddelande, men inte begära bekräftelse, kan det anropa följande tre metoder.</span><span class="sxs-lookup"><span data-stu-id="8f4fb-140">If the cmdlet or provider must send a message but not request confirmation, it can call the following three methods.</span></span> <span data-ttu-id="8f4fb-141">Undvik att använda metoden [system. Management. Automation. cmdlet. WriteObject](/dotnet/api/System.Management.Automation.Cmdlet.WriteObject) för att skicka meddelanden av dessa typer eftersom utdata för [system. Management. Automation. cmdlet. WriteObject](/dotnet/api/System.Management.Automation.Cmdlet.WriteObject) är blandas med den normala utmatningen av din cmdlet eller provider, vilket gör det svårt att skriva skript.</span><span class="sxs-lookup"><span data-stu-id="8f4fb-141">Avoid using the [System.Management.Automation.Cmdlet.WriteObject](/dotnet/api/System.Management.Automation.Cmdlet.WriteObject) method to send messages of these types because [System.Management.Automation.Cmdlet.WriteObject](/dotnet/api/System.Management.Automation.Cmdlet.WriteObject) output is intermingled with the normal output of your cmdlet or provider, which makes script writing difficult.</span></span>

- <span data-ttu-id="8f4fb-142">För att varna användaren och fortsätta med åtgärden kan cmdleten eller providern anropa metoden [system. Management. Automation. cmdlet. WriteWarning](/dotnet/api/System.Management.Automation.Cmdlet.WriteWarning) .</span><span class="sxs-lookup"><span data-stu-id="8f4fb-142">To caution the user and continue with the operation, the cmdlet or provider can call the [System.Management.Automation.Cmdlet.WriteWarning](/dotnet/api/System.Management.Automation.Cmdlet.WriteWarning) method.</span></span>

- <span data-ttu-id="8f4fb-143">Om du vill ange ytterligare information som användaren kan hämta med hjälp av `Verbose` -parametern kan cmdleten eller providern anropa metoden [system. Management. Automation. cmdlet. WriteVerbose](/dotnet/api/System.Management.Automation.Cmdlet.WriteVerbose) .</span><span class="sxs-lookup"><span data-stu-id="8f4fb-143">To provide additional information that the user can retrieve using the `Verbose` parameter, the cmdlet or provider can call the [System.Management.Automation.Cmdlet.WriteVerbose](/dotnet/api/System.Management.Automation.Cmdlet.WriteVerbose) method.</span></span>

- <span data-ttu-id="8f4fb-144">För att ge information om fel söknings nivå för andra utvecklare eller för produkt support kan cmdleten eller providern anropa metoden [system. Management. Automation. cmdlet. WriteDebug](/dotnet/api/System.Management.Automation.Cmdlet.WriteDebug) .</span><span class="sxs-lookup"><span data-stu-id="8f4fb-144">To provide debugging-level detail for other developers or for product support, the cmdlet or provider can call the [System.Management.Automation.Cmdlet.WriteDebug](/dotnet/api/System.Management.Automation.Cmdlet.WriteDebug) method.</span></span> <span data-ttu-id="8f4fb-145">Användaren kan hämta den här informationen med hjälp av `Debug` parametern.</span><span class="sxs-lookup"><span data-stu-id="8f4fb-145">The user can retrieve this information using the `Debug` parameter.</span></span>

<span data-ttu-id="8f4fb-146">Cmdlets och providers anropar först följande metoder för att begära bekräftelse innan de försöker utföra en åtgärd som ändrar ett system utanför Windows PowerShell:</span><span class="sxs-lookup"><span data-stu-id="8f4fb-146">Cmdlets and providers first call the following methods to request confirmation before they attempt to perform an operation that changes a system outside of Windows PowerShell:</span></span>

- [<span data-ttu-id="8f4fb-147">System. Management. Automation. cmdlet. ShouldProcess</span><span class="sxs-lookup"><span data-stu-id="8f4fb-147">System.Management.Automation.Cmdlet.Shouldprocess</span></span>](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess)

- [<span data-ttu-id="8f4fb-148">System. Management. Automation. Provider. Cmdletprovider. ShouldProcess</span><span class="sxs-lookup"><span data-stu-id="8f4fb-148">System.Management.Automation.Provider.Cmdletprovider.Shouldprocess</span></span>](/dotnet/api/System.Management.Automation.Provider.CmdletProvider.ShouldProcess)

<span data-ttu-id="8f4fb-149">De gör detta genom att anropa metoden [system. Management. Automation. cmdlet. ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) , som gör att användaren kan bekräfta åtgärden baserat på hur användaren anropade kommandot.</span><span class="sxs-lookup"><span data-stu-id="8f4fb-149">They do so by calling the [System.Management.Automation.Cmdlet.Shouldprocess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) method, which prompts the user to confirm the operation based on how the user invoked the command.</span></span>

## <a name="see-also"></a><span data-ttu-id="8f4fb-150">Se även</span><span class="sxs-lookup"><span data-stu-id="8f4fb-150">See Also</span></span>

[<span data-ttu-id="8f4fb-151">Skriva en Windows PowerShell-cmdlet</span><span class="sxs-lookup"><span data-stu-id="8f4fb-151">Writing a Windows PowerShell Cmdlet</span></span>](./writing-a-windows-powershell-cmdlet.md)

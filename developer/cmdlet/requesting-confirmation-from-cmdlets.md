---
title: Begär bekräftelse från cmdletar | Microsoft Docs
ms.custom: ''
ms.date: 09/13/2016
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- ConfirmImpact [PowerShell Programmer's Guide], described
- ShouldContinue [PowerShell Programmer's Guide], described
- user feedback [PowerShell Programmer's Guide], requesting
- ShouldProcess [PowerShell Programmer's Guide], described
- ConfirmPreference [PowerShell Programmer's Guide], described
ms.assetid: 37d6e87f-57b7-40bd-b645-392cf0b6e88e
caps.latest.revision: 13
ms.openlocfilehash: ec441831f5e3231a44c9875d1b6d2bf6280a6965
ms.sourcegitcommit: b6871f21bd666f9cd71dd336bb3f844cf472b56c
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 02/03/2019
ms.locfileid: "56844991"
---
# <a name="requesting-confirmation-from-cmdlets"></a><span data-ttu-id="01634-102">Begära bekräftelse från cmdlets</span><span class="sxs-lookup"><span data-stu-id="01634-102">Requesting Confirmation from Cmdlets</span></span>

<span data-ttu-id="01634-103">Cmdlet: ar bör begära bekräftelse när de är på väg att göra en ändring i systemet som ligger utanför Windows PowerShell-miljö.</span><span class="sxs-lookup"><span data-stu-id="01634-103">Cmdlets should request confirmation when they are about to make a change to the system that is outside of the Windows PowerShell environment.</span></span> <span data-ttu-id="01634-104">Till exempel om en cmdlet är håller på att lägga till ett användarkonto eller stoppa en process, kräver cmdleten bekräftelse från användaren innan den fortsätter.</span><span class="sxs-lookup"><span data-stu-id="01634-104">For example, if a cmdlet is about to add a user account or stop a process, the cmdlet should require confirmation from the user before it proceeds.</span></span> <span data-ttu-id="01634-105">Däremot om en cmdlet är att ändra en Windows PowerShell-variabel, behöver cmdleten inte bekräftelse.</span><span class="sxs-lookup"><span data-stu-id="01634-105">In contrast, if a cmdlet is about to change a Windows PowerShell variable, the cmdlet does not need to require confirmation.</span></span>

<span data-ttu-id="01634-106">För att göra en begäran om händelsebekräftelse cmdlet: en anger att den stöder begäranden om händelsebekräftelse och den måste anropa den [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) och [ System.Management.Automation.Cmdlet.Shouldcontinue\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) (valfritt) metoder för att visa ett meddelande om bekräftelse på begäran.</span><span class="sxs-lookup"><span data-stu-id="01634-106">In order to make a confirmation request, the cmdlet must indicate that it supports confirmation requests, and it must call the [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) and [System.Management.Automation.Cmdlet.Shouldcontinue\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) (optional) methods to display a confirmation request message.</span></span>

## <a name="supporting-confirmation-requests"></a><span data-ttu-id="01634-107">Stöd för begäranden om Händelsebekräftelse</span><span class="sxs-lookup"><span data-stu-id="01634-107">Supporting Confirmation Requests</span></span>

<span data-ttu-id="01634-108">Cmdlet: en kan anges för begäranden om händelsebekräftelse måste den `SupportsShouldProcess` parametern för Cmdlet-attributet till `true`.</span><span class="sxs-lookup"><span data-stu-id="01634-108">To support confirmation requests, the cmdlet must set the `SupportsShouldProcess` parameter of the Cmdlet attribute to `true`.</span></span> <span data-ttu-id="01634-109">På så sätt kan den `Confirm` och `WhatIf` cmdlet-parametrarna som tillhandahålls av Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="01634-109">This enables the `Confirm` and `WhatIf` cmdlet parameters that are provided by Windows PowerShell.</span></span> <span data-ttu-id="01634-110">Den `Confirm` parameter gör det möjligt för användaren att styra om begäran om händelsebekräftelse ska visas.</span><span class="sxs-lookup"><span data-stu-id="01634-110">The `Confirm` parameter allows the user to control whether the confirmation request is displayed.</span></span> <span data-ttu-id="01634-111">Den `WhatIf` parameter gör det möjligt för användaren för att avgöra om cmdlet: en ska visa ett meddelande eller utföra åtgärden.</span><span class="sxs-lookup"><span data-stu-id="01634-111">The `WhatIf` parameter allows the user to determine whether the cmdlet should display a message or perform its action.</span></span> <span data-ttu-id="01634-112">Lägg inte till manuellt i `Confirm` och `WhatIf` parametrar för att en cmdlet.</span><span class="sxs-lookup"><span data-stu-id="01634-112">Do not manually add the `Confirm` and `WhatIf` parameters to a cmdlet.</span></span>

<span data-ttu-id="01634-113">I följande exempel visas en deklaration av Cmdlet attribut som har stöd för begäranden om händelsebekräftelse.</span><span class="sxs-lookup"><span data-stu-id="01634-113">The following example shows a Cmdlet attribute declaration that supports confirmation requests.</span></span>

```csharp
[Cmdlet(VerbsDiagnostic.Test, "RequestConfirmationTemplate1",
        SupportsShouldProcess = true)]
```

## <a name="calling-the-confirmation-request-methods"></a><span data-ttu-id="01634-114">Anropa metodbegäranden bekräftelse</span><span class="sxs-lookup"><span data-stu-id="01634-114">Calling the Confirmation request methods</span></span>

<span data-ttu-id="01634-115">I cmdlet-koden anropar den [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) metoden innan åtgärden som ändrar systemet utförs.</span><span class="sxs-lookup"><span data-stu-id="01634-115">In the cmdlet code, call the [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) method before the operation that changes the system is performed.</span></span> <span data-ttu-id="01634-116">Utforma cmdlet: en så att om anropet returnerar ett värde av `false`, är det inte att utföra åtgärden och cmdlet bearbetar nästa åtgärd.</span><span class="sxs-lookup"><span data-stu-id="01634-116">Design the cmdlet so that if the call returns a value of `false`, the operation is not performed, and the cmdlet processes the next operation.</span></span>

## <a name="calling-the-shouldcontinue-method"></a><span data-ttu-id="01634-117">Att anropa metoden ShouldContinue</span><span class="sxs-lookup"><span data-stu-id="01634-117">Calling the ShouldContinue Method</span></span>

<span data-ttu-id="01634-118">De flesta cmdletar begär bekräftelse via endast den [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) metod.</span><span class="sxs-lookup"><span data-stu-id="01634-118">Most cmdlets request confirmation using only the [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) method.</span></span> <span data-ttu-id="01634-119">Ibland kan dock kräva ytterligare bekräftelse.</span><span class="sxs-lookup"><span data-stu-id="01634-119">However, some cases might require additional confirmation.</span></span> <span data-ttu-id="01634-120">Dessa fall kan komplettera den [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) anropa med ett anrop till den [System.Management.Automation.Cmdlet.Shouldcontinue\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) metod.</span><span class="sxs-lookup"><span data-stu-id="01634-120">For these cases, supplement the [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) call with a call to the [System.Management.Automation.Cmdlet.Shouldcontinue\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) method.</span></span> <span data-ttu-id="01634-121">På så sätt kan cmdlet eller provider för att få en mer detaljerad styra omfattningen av den **Ja till alla** svar på bekräfta åtgärden.</span><span class="sxs-lookup"><span data-stu-id="01634-121">This allows the cmdlet or provider to more finely control the scope of the **Yes to all** response to the confirmation prompt.</span></span>

<span data-ttu-id="01634-122">Om en cmdlet anropar den [System.Management.Automation.Cmdlet.Shouldcontinue\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) metoden cmdlet: en måste också tillhandahålla en `Force` växla parametern.</span><span class="sxs-lookup"><span data-stu-id="01634-122">If a cmdlet calls the [System.Management.Automation.Cmdlet.Shouldcontinue\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) method, the cmdlet must also provide a `Force` switch parameter.</span></span> <span data-ttu-id="01634-123">Om användaren anger `Force` när du anropar cmdleten, cmdleten fortfarande ska anropa [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess), men ska kringgås anropet till [ System.Management.Automation.Cmdlet.Shouldcontinue\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue).</span><span class="sxs-lookup"><span data-stu-id="01634-123">If the user specifies `Force` when the user invokes the cmdlet, the cmdlet should still call [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess), but it should bypass the call to [System.Management.Automation.Cmdlet.Shouldcontinue\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue).</span></span>

<span data-ttu-id="01634-124">[System.Management.Automation.Cmdlet.Shouldcontinue\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) genereras ett undantagsfel när den anropas från en icke-interaktiv miljö där användaren uppmanas inte.</span><span class="sxs-lookup"><span data-stu-id="01634-124">[System.Management.Automation.Cmdlet.Shouldcontinue\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) will throw an exception when it is called from a non-interactive environment where the user cannot be prompted.</span></span> <span data-ttu-id="01634-125">Att lägga till en `Force` parametern säkerställer att kommandot fortfarande kan utföras när den anropas i en icke-interaktiv miljö.</span><span class="sxs-lookup"><span data-stu-id="01634-125">Adding a `Force` parameter ensures that the command can still be performed when it is invoked in a non-interactive environment.</span></span>

<span data-ttu-id="01634-126">I följande exempel visas hur du anropar [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) och [System.Management.Automation.Cmdlet.Shouldcontinue\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue).</span><span class="sxs-lookup"><span data-stu-id="01634-126">The following example shows how to call [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) and [System.Management.Automation.Cmdlet.Shouldcontinue\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue).</span></span>

```csharp
if (ShouldProcess (...) )
{
  if (Force || ShouldContinue(...))
  {
     // Add code that performs the operation.
  }
}
```

<span data-ttu-id="01634-127">Beteendet för en [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) anrop kan variera beroende på miljön där cmdleten har anropats.</span><span class="sxs-lookup"><span data-stu-id="01634-127">The behavior of a [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) call can vary depending on the environment in which the cmdlet is invoked.</span></span> <span data-ttu-id="01634-128">Med hjälp av föregående riktlinjer hjälper att säkerställa att cmdleten fungerar konsekvent med andra cmdletar, oavsett värdmiljön.</span><span class="sxs-lookup"><span data-stu-id="01634-128">Using the previous guidelines will help ensure that the cmdlet behaves consistently with other cmdlets, regardless of the host environment.</span></span>

<span data-ttu-id="01634-129">Ett exempel på anropar den [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) metod, se [hur du begär bekräftelser](./how-to-request-confirmations.md).</span><span class="sxs-lookup"><span data-stu-id="01634-129">For an example of calling the [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) method, see [How to Request Confirmations](./how-to-request-confirmations.md).</span></span>

## <a name="specify-the-impact-level"></a><span data-ttu-id="01634-130">Ange effektnivå</span><span class="sxs-lookup"><span data-stu-id="01634-130">Specify the Impact Level</span></span>

<span data-ttu-id="01634-131">När du skapar cmdleten, ange effektnivå (allvarlighetsgrad) av ändringen.</span><span class="sxs-lookup"><span data-stu-id="01634-131">When you create the cmdlet, specify the impact level (the severity) of the change.</span></span> <span data-ttu-id="01634-132">Gör detta genom att ange värdet för den `ConfirmImpact` parametern för Cmdlet-attributet till hög, medel eller låg.</span><span class="sxs-lookup"><span data-stu-id="01634-132">To do this, set the value of the `ConfirmImpact` parameter of the Cmdlet attribute to High, Medium, or Low.</span></span> <span data-ttu-id="01634-133">Du kan ange ett värde för `ConfirmImpact` bara när du även ange den `SupportsShouldProcess` parametern för cmdleten.</span><span class="sxs-lookup"><span data-stu-id="01634-133">You can specify a value for `ConfirmImpact` only when you also specify the `SupportsShouldProcess` parameter for the cmdlet.</span></span>

<span data-ttu-id="01634-134">För de flesta cmdletarna behöver du inte uttryckligen ange `ConfirmImpact`.</span><span class="sxs-lookup"><span data-stu-id="01634-134">For most cmdlets, you do not have to explicitly specify `ConfirmImpact`.</span></span>  <span data-ttu-id="01634-135">Använd istället standardinställningen för parametern, som är Medium.</span><span class="sxs-lookup"><span data-stu-id="01634-135">Instead, use the default setting of the parameter, which is Medium.</span></span> <span data-ttu-id="01634-136">Om du ställer in `ConfirmImpact` till hög, kommer åtgärden att bekräftas som standard.</span><span class="sxs-lookup"><span data-stu-id="01634-136">If you set `ConfirmImpact` to High, the operation will be confirmed by default.</span></span> <span data-ttu-id="01634-137">Reservera den här inställningen för mycket störande åtgärder, till exempel formatera en volym på hårddisken.</span><span class="sxs-lookup"><span data-stu-id="01634-137">Reserve this setting for highly disruptive actions, such as reformatting a hard-disk volume.</span></span>

## <a name="calling-non-confirmation-methods"></a><span data-ttu-id="01634-138">Anropa metoder för icke-bekräftelse</span><span class="sxs-lookup"><span data-stu-id="01634-138">Calling Non-Confirmation Methods</span></span>

<span data-ttu-id="01634-139">Om cmdlet eller providern måste skicka ett meddelande men inte begär bekräftelse, kan det anropa följande tre metoder.</span><span class="sxs-lookup"><span data-stu-id="01634-139">If the cmdlet or provider must send a message but not request confirmation, it can call the following three methods.</span></span> <span data-ttu-id="01634-140">Undvik att använda den [System.Management.Automation.Cmdlet.Writeobject\*](/dotnet/api/System.Management.Automation.Cmdlet.WriteObject) metod för att skicka meddelanden av typerna eftersom [System.Management.Automation.Cmdlet.Writeobject\*](/dotnet/api/System.Management.Automation.Cmdlet.WriteObject) utdata är en med normala utdata från cmdleten eller din leverantör, vilket gör skriptet skriva svårt.</span><span class="sxs-lookup"><span data-stu-id="01634-140">Avoid using the [System.Management.Automation.Cmdlet.Writeobject\*](/dotnet/api/System.Management.Automation.Cmdlet.WriteObject) method to send messages of these types because [System.Management.Automation.Cmdlet.Writeobject\*](/dotnet/api/System.Management.Automation.Cmdlet.WriteObject) output is intermingled with the normal output of your cmdlet or provider, which makes script writing difficult.</span></span>

- <span data-ttu-id="01634-141">Varning användaren och fortsätt med åtgärden genom cmdlet eller providern kan anropa den [System.Management.Automation.Cmdlet.Writewarning\*](/dotnet/api/System.Management.Automation.Cmdlet.WriteWarning) metod.</span><span class="sxs-lookup"><span data-stu-id="01634-141">To caution the user and continue with the operation, the cmdlet or provider can call the [System.Management.Automation.Cmdlet.Writewarning\*](/dotnet/api/System.Management.Automation.Cmdlet.WriteWarning) method.</span></span>

- <span data-ttu-id="01634-142">Ange ytterligare information som du kan hämta genom att använda den `Verbose` parametern, cmdlet eller providern kan anropa den [System.Management.Automation.Cmdlet.Writeverbose\*](/dotnet/api/System.Management.Automation.Cmdlet.WriteVerbose) metod.</span><span class="sxs-lookup"><span data-stu-id="01634-142">To provide additional information that the user can retrieve using the `Verbose` parameter, the cmdlet or provider can call the [System.Management.Automation.Cmdlet.Writeverbose\*](/dotnet/api/System.Management.Automation.Cmdlet.WriteVerbose) method.</span></span>

- <span data-ttu-id="01634-143">För att ge felsökning detaljnivåer för andra utvecklare eller för produktsupport, cmdlet eller providern kan anropa den [System.Management.Automation.Cmdlet.Writedebug\*](/dotnet/api/System.Management.Automation.Cmdlet.WriteDebug) metod.</span><span class="sxs-lookup"><span data-stu-id="01634-143">To provide debugging-level detail for other developers or for product support, the cmdlet or provider can call the [System.Management.Automation.Cmdlet.Writedebug\*](/dotnet/api/System.Management.Automation.Cmdlet.WriteDebug) method.</span></span> <span data-ttu-id="01634-144">Användaren kan hämta den här informationen med hjälp av den `Debug` parametern.</span><span class="sxs-lookup"><span data-stu-id="01634-144">The user can retrieve this information using the `Debug` parameter.</span></span>

<span data-ttu-id="01634-145">Cmdlets och providers först anropa följande metoder för att begära bekräftelse innan de försöker utföra en åtgärd som ändrar ett system utanför Windows PowerShell:</span><span class="sxs-lookup"><span data-stu-id="01634-145">Cmdlets and providers first call the following methods to request confirmation before they attempt to perform an operation that changes a system outside of Windows PowerShell:</span></span>

- [<span data-ttu-id="01634-146">System.Management.Automation.Cmdlet.Shouldprocess</span><span class="sxs-lookup"><span data-stu-id="01634-146">System.Management.Automation.Cmdlet.Shouldprocess</span></span>](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess)

- [<span data-ttu-id="01634-147">System.Management.Automation.Provider.Cmdletprovider.Shouldprocess</span><span class="sxs-lookup"><span data-stu-id="01634-147">System.Management.Automation.Provider.Cmdletprovider.Shouldprocess</span></span>](/dotnet/api/System.Management.Automation.Provider.CmdletProvider.ShouldProcess)

<span data-ttu-id="01634-148">De gör det genom att anropa den [System.Management.Automation.Cmdlet.Shouldprocess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) metod, som uppmanar användaren att bekräfta åtgärden baserat på hur användaren anropas kommandot.</span><span class="sxs-lookup"><span data-stu-id="01634-148">They do so by calling the [System.Management.Automation.Cmdlet.Shouldprocess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) method, which prompts the user to confirm the operation based on how the user invoked the command.</span></span>

## <a name="see-also"></a><span data-ttu-id="01634-149">Se även</span><span class="sxs-lookup"><span data-stu-id="01634-149">See Also</span></span>

[<span data-ttu-id="01634-150">Skriva en Windows PowerShell-Cmdlet</span><span class="sxs-lookup"><span data-stu-id="01634-150">Writing a Windows PowerShell Cmdlet</span></span>](./writing-a-windows-powershell-cmdlet.md)

---
ms.date: 07/10/2019
keywords: jea, powershell, säkerhet
title: JEA-säkerhetsaspekter
ms.openlocfilehash: befc24fec368c4f6d60477daf63bf17e9431133e
ms.sourcegitcommit: 46bebe692689ebedfe65ff2c828fe666b443198d
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 07/10/2019
ms.locfileid: "67726578"
---
# <a name="jea-security-considerations"></a><span data-ttu-id="8e8d0-103">JEA-säkerhetsaspekter</span><span class="sxs-lookup"><span data-stu-id="8e8d0-103">JEA Security Considerations</span></span>

<span data-ttu-id="8e8d0-104">JEA hjälper dig att förbättra din säkerhetsposition genom att minska antalet permanenta administratörer på dina datorer.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-104">JEA helps you improve your security posture by reducing the number of permanent administrators on your machines.</span></span> <span data-ttu-id="8e8d0-105">JEA använder en sessionskonfiguration med PowerShell för att skapa en ny startpunkt för användare att hantera systemet.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-105">JEA uses a PowerShell session configuration to create a new entry point for users to manage the system.</span></span> <span data-ttu-id="8e8d0-106">Användare som behöver upphöjd, men inte obegränsad åtkomst till datorn för att utföra administrativa uppgifter kan beviljas åtkomst till JEA-slutpunkt.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-106">Users who need elevated, but not unlimited, access to the machine to do administrative tasks can be granted access to the JEA endpoint.</span></span> <span data-ttu-id="8e8d0-107">Eftersom JEA kan dessa användare till admin-kommandon utan fullständig administratörsåtkomst, kan du sedan ta bort användare från säkerhetsgrupper med hög behörighetsnivå.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-107">Since JEA allows these users to run admin commands without having full admin access, you can then remove those users from highly privileged security groups.</span></span>

## <a name="run-as-account"></a><span data-ttu-id="8e8d0-108">Kör som-konto</span><span class="sxs-lookup"><span data-stu-id="8e8d0-108">Run-As account</span></span>

<span data-ttu-id="8e8d0-109">Varje JEA-slutpunkt har en avsedda **kör som-** konto.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-109">Each JEA endpoint has a designated **run-as** account.</span></span> <span data-ttu-id="8e8d0-110">Detta är det konto som den anslutande användaren åtgärder utförs.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-110">This is the account under which the connecting user's actions are executed.</span></span> <span data-ttu-id="8e8d0-111">Det här kontot kan konfigureras i den [session konfigurationsfilen](session-configurations.md), och det konto som du väljer har betydelse på säkerheten för din slutpunkt.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-111">This account is configurable in the [session configuration file](session-configurations.md), and the account you choose has a significant bearing on the security of your endpoint.</span></span>

<span data-ttu-id="8e8d0-112">**Virtuella konton** är det rekommenderade sättet att konfigurera den **kör som-** konto.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-112">**Virtual accounts** are the recommended way of configuring the **run-as** account.</span></span> <span data-ttu-id="8e8d0-113">Virtuella konton är enstaka, tillfälligt lokala konton som har skapats för den anslutande användaren ska användas under hela sin JEA-session.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-113">Virtual accounts are one-time, temporary local accounts that are created for the connecting user to use during the duration of their JEA session.</span></span> <span data-ttu-id="8e8d0-114">Så snart som sin session avslutas virtuellt konto förstörs och kan inte längre användas.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-114">As soon as their session is terminated, the virtual account is destroyed and can't be used anymore.</span></span> <span data-ttu-id="8e8d0-115">Den anslutande användaren känner inte till autentiseringsuppgifterna för kontot virtuella.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-115">The connecting user doesn't know the credentials for the virtual account.</span></span> <span data-ttu-id="8e8d0-116">Virtuellt konto kan inte användas för att komma åt systemet via ett annat sätt, t.ex Fjärrskrivbord eller en obegränsad PowerShell-slutpunkt.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-116">The virtual account can't be used to access the system via other means like Remote Desktop or an unconstrained PowerShell endpoint.</span></span>

<span data-ttu-id="8e8d0-117">Som standard virtuella konton som hör till lokalt **administratörer** på datorn.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-117">By default, virtual accounts belong to the local **Administrators** group on the machine.</span></span> <span data-ttu-id="8e8d0-118">Detta ger dem fullständiga rättigheter att hantera allt i systemet, men inga rättigheter att hantera resurser i nätverket.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-118">This gives them full rights to manage anything on the system, but no rights to manage resources on the network.</span></span>
<span data-ttu-id="8e8d0-119">När du autentiserar med andra datorer är som det lokala datorkontot inte virtuellt konto användarkontexten.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-119">When authenticating with other machines, the user context is that of the local computer account, not the virtual account.</span></span>

<span data-ttu-id="8e8d0-120">Domänkontrollanter är ett specialfall, eftersom det inte finns en lokal **administratörer** grupp.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-120">Domain controllers are a special case since there isn't a local **Administrators** group.</span></span> <span data-ttu-id="8e8d0-121">I stället virtuella konton tillhör **Domänadministratörer** och kan hantera katalogtjänster på domänkontrollanten.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-121">Instead, virtual accounts belong to **Domain Admins** and can manage the directory services on the domain controller.</span></span> <span data-ttu-id="8e8d0-122">Domän-identiteten är fortfarande begränsad till användning på domänkontrollanten där JEA-sessionen har initierats.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-122">The domain identity is still restricted for use on the domain controller where the JEA session was instantiated.</span></span> <span data-ttu-id="8e8d0-123">Alla nätverksåtkomst verkar komma från domänkontrollantens datorobjekt i stället.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-123">Any network access appears to come from the domain controller computer object instead.</span></span>

<span data-ttu-id="8e8d0-124">I båda fallen kan du uttryckligen definiera vilka säkerhetsgrupper virtuella kontot tillhör.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-124">In both cases, you may explicitly define which security groups the virtual account belongs to.</span></span> <span data-ttu-id="8e8d0-125">Detta är en bra idé när uppgiften kan göras utan lokala administratörsprivilegier.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-125">This is a good practice when the task can be done without local or domain admin privileges.</span></span> <span data-ttu-id="8e8d0-126">Om du redan har en säkerhetsgrupp som definierats för dina administratörer kan bevilja virtuellt konto medlemskap i gruppen.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-126">If you already have a security group defined for your admins, grant the virtual account membership to that group.</span></span> <span data-ttu-id="8e8d0-127">Virtuellt konto gruppmedlemskap är begränsad till lokala säkerhetsgrupper på arbetsstationer och medlemsservrar.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-127">Virtual account group membership is limited to local security groups on workstation and member servers.</span></span> <span data-ttu-id="8e8d0-128">Virtuella konton måste vara medlemmar i domänsäkerhetsgrupper på domänkontrollanter.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-128">On domain controllers, virtual accounts must be members of domain security groups.</span></span>
<span data-ttu-id="8e8d0-129">När virtuella kontot har lagts till en eller flera säkerhetsgrupper, tillhör det inte längre standardgrupper (lokal eller domänåtkomst administratörer).</span><span class="sxs-lookup"><span data-stu-id="8e8d0-129">Once the virtual account has been added to one or more security groups, it no longer belongs to the default groups (local or domain admins).</span></span>

<span data-ttu-id="8e8d0-130">I följande tabell sammanfattas de möjliga konfigurationsalternativ och resulterande behörigheter för virtuella konton:</span><span class="sxs-lookup"><span data-stu-id="8e8d0-130">The following table summarizes the possible configuration options and resulting permissions for virtual accounts:</span></span>

|        <span data-ttu-id="8e8d0-131">Typ av dator</span><span class="sxs-lookup"><span data-stu-id="8e8d0-131">Computer type</span></span>         | <span data-ttu-id="8e8d0-132">Virtuell grupp kontokonfigurationen</span><span class="sxs-lookup"><span data-stu-id="8e8d0-132">Virtual account group configuration</span></span> |                   <span data-ttu-id="8e8d0-133">Lokala användarkontext</span><span class="sxs-lookup"><span data-stu-id="8e8d0-133">Local user context</span></span>                    | <span data-ttu-id="8e8d0-134">Nätverket användarkontext</span><span class="sxs-lookup"><span data-stu-id="8e8d0-134">Network user context</span></span> |
| ---------------------------- | ----------------------------------- | ------------------------------------------------------- | -------------------- |
| <span data-ttu-id="8e8d0-135">Domänkontrollant</span><span class="sxs-lookup"><span data-stu-id="8e8d0-135">Domain controller</span></span>            | <span data-ttu-id="8e8d0-136">Standard</span><span class="sxs-lookup"><span data-stu-id="8e8d0-136">Default</span></span>                             | <span data-ttu-id="8e8d0-137">Domänanvändare, medlem i ”*domän*\Domain'</span><span class="sxs-lookup"><span data-stu-id="8e8d0-137">Domain user, member of '*DOMAIN*\Domain Admins'</span></span>         | <span data-ttu-id="8e8d0-138">Datorkonto</span><span class="sxs-lookup"><span data-stu-id="8e8d0-138">Computer account</span></span>     |
| <span data-ttu-id="8e8d0-139">Domänkontrollant</span><span class="sxs-lookup"><span data-stu-id="8e8d0-139">Domain controller</span></span>            | <span data-ttu-id="8e8d0-140">Domängrupper A och B</span><span class="sxs-lookup"><span data-stu-id="8e8d0-140">Domain groups A and B</span></span>               | <span data-ttu-id="8e8d0-141">Domänanvändare, medlem i ”*domän*\A ','*domän*\B'</span><span class="sxs-lookup"><span data-stu-id="8e8d0-141">Domain user, member of '*DOMAIN*\A', '*DOMAIN*\B'</span></span>       | <span data-ttu-id="8e8d0-142">Datorkonto</span><span class="sxs-lookup"><span data-stu-id="8e8d0-142">Computer account</span></span>     |
| <span data-ttu-id="8e8d0-143">Medlemsserver eller arbetsstation</span><span class="sxs-lookup"><span data-stu-id="8e8d0-143">Member server or workstation</span></span> | <span data-ttu-id="8e8d0-144">Standard</span><span class="sxs-lookup"><span data-stu-id="8e8d0-144">Default</span></span>                             | <span data-ttu-id="8e8d0-145">Lokal användare, medlem i ”*BUILTIN*\Administrators'</span><span class="sxs-lookup"><span data-stu-id="8e8d0-145">Local user, member of '*BUILTIN*\Administrators'</span></span>        | <span data-ttu-id="8e8d0-146">Datorkonto</span><span class="sxs-lookup"><span data-stu-id="8e8d0-146">Computer account</span></span>     |
| <span data-ttu-id="8e8d0-147">Medlemsserver eller arbetsstation</span><span class="sxs-lookup"><span data-stu-id="8e8d0-147">Member server or workstation</span></span> | <span data-ttu-id="8e8d0-148">Lokala grupper C och D</span><span class="sxs-lookup"><span data-stu-id="8e8d0-148">Local groups C and D</span></span>                | <span data-ttu-id="8e8d0-149">Lokal användare, medlem i ”*datorn*\C' och '*datorn*\D”</span><span class="sxs-lookup"><span data-stu-id="8e8d0-149">Local user, member of '*COMPUTER*\C' and '*COMPUTER*\D'</span></span> | <span data-ttu-id="8e8d0-150">Datorkonto</span><span class="sxs-lookup"><span data-stu-id="8e8d0-150">Computer account</span></span>     |

<span data-ttu-id="8e8d0-151">När du tittar på säkerhetsgranskningshändelser och händelseloggarna för programmet, ser du att varje användarsession i JEA har ett unikt virtuellt konto.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-151">When you look at security audit events and application event logs, you see that each JEA user session has a unique virtual account.</span></span> <span data-ttu-id="8e8d0-152">Det här unika kontot kan du spåra användaråtgärder i en JEA-slutpunkt tillbaka till den ursprungliga användaren som körde kommandot.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-152">This unique account helps you track user actions in a JEA endpoint back to the original user who ran the command.</span></span> <span data-ttu-id="8e8d0-153">Virtuellt konto namnen följer formatet `WinRM Virtual Users\WinRM_VA_<ACCOUNTNUMBER>_<DOMAIN>_<sAMAccountName>` till exempel om användaren **Alice** i domänen **Contoso** startar om en tjänst i en JEA-slutpunkt, användarnamnet som är associerade med alla tjänsthanteraren händelser blir `WinRM Virtual Users\WinRM_VA_1_contoso_alice`.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-153">Virtual account names follow the format `WinRM Virtual Users\WinRM_VA_<ACCOUNTNUMBER>_<DOMAIN>_<sAMAccountName>` For example, if user **Alice** in domain **Contoso** restarts a service in a JEA endpoint, the username associated with any service control manager events would be `WinRM Virtual Users\WinRM_VA_1_contoso_alice`.</span></span>

<span data-ttu-id="8e8d0-154">**Gruppen hanterade tjänstkonton (gMSAs)** är användbara när en medlemsserver måste ha åtkomst till nätverksresurser i JEA-session.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-154">**Group-managed service accounts (gMSAs)** are useful when a member server needs to have access to network resources in the JEA session.</span></span> <span data-ttu-id="8e8d0-155">Till exempel när en JEA-slutpunkt används för att styra åtkomsten till en REST API-tjänst som finns på en annan dator.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-155">For example, when a JEA endpoint is used to control access to a REST API service hosted on a different machine.</span></span> <span data-ttu-id="8e8d0-156">Det är enkelt att skriva funktioner för att anropa REST-API: er, men du behöver en nätverksidentitet för att autentisera med API: et.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-156">It's easy to write functions to invoke the REST APIs, but you need a network identity to authenticate with the API.</span></span> <span data-ttu-id="8e8d0-157">Ett-grupphanterat tjänstkonto gör det andra hoppet möjligt samtidigt som de behåller kontroll över vilka datorer kan använda kontot.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-157">Using a group-managed service account makes the second hop possible while maintaining control over which computers can use the account.</span></span> <span data-ttu-id="8e8d0-158">GMSA gällande behörigheter definieras av säkerhetsgrupper (lokalt eller via domänadministratör) som gMSA-kontot tillhör.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-158">The effective permissions of the gMSA are defined by the security groups (local or domain) to which the gMSA account belongs.</span></span>

<span data-ttu-id="8e8d0-159">När en JEA-slutpunkt har konfigurerats för att använda ett gMSA åtgärderna för alla JEA-användare ser ut att komma från samma gMSA.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-159">When a JEA endpoint is configured to use a gMSA, the actions of all JEA users appear to come from the same gMSA.</span></span> <span data-ttu-id="8e8d0-160">Det enda sättet att spåra åtgärder tillbaka till en specifik användare är att identifiera uppsättningen kommandon som körs i en PowerShell-session avskrift.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-160">The only way to trace actions back to a specific user is to identify the set of commands run in a PowerShell session transcript.</span></span>

<span data-ttu-id="8e8d0-161">**Pass till autentiseringsuppgifter** används när du inte anger en **kör som-** konto.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-161">**Pass-thru credentials** are used when you don't specify a **run-as** account.</span></span> <span data-ttu-id="8e8d0-162">PowerShell använder anslutande användarens autentiseringsuppgifter för att köra kommandon på fjärrservern.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-162">PowerShell uses the connecting user's credential to run commands on the remote server.</span></span> <span data-ttu-id="8e8d0-163">Detta måste du ge den anslutande användare direkt åtkomsten till Privilegierade hanteringsgrupper.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-163">This requires you to grant the connecting user direct access to privileged management groups.</span></span> <span data-ttu-id="8e8d0-164">Den här konfigurationen är **inte** rekommenderas för JEA.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-164">This configuration is **not** recommended for JEA.</span></span> <span data-ttu-id="8e8d0-165">Om den anslutande användaren redan har administratörsrättigheter, kan de undvika JEA och hantera systemet via andra, obegränsad innebär.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-165">If the connecting user already has admin privileges, they can avoid JEA and manage the system via other, unconstrained means.</span></span> <span data-ttu-id="8e8d0-166">Mer information finns i avsnittet nedan om hur [JEA inte skydda mot administratörer](#jea-doesnt-protect-against-admins).</span><span class="sxs-lookup"><span data-stu-id="8e8d0-166">For more information, see the section below on how [JEA doesn't protect against admins](#jea-doesnt-protect-against-admins).</span></span>

<span data-ttu-id="8e8d0-167">**Kör som-standardkonton** kan du ange ett användarkonto som hela PowerShell-sessionen körs under.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-167">**Standard run-as accounts** allow you to specify any user account under which the entire PowerShell session runs.</span></span> <span data-ttu-id="8e8d0-168">Sessionskonfigurationer med fast **kör som-** konton (med den `-RunAsCredential` parametern) är inte medvetna om JEA.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-168">Session configurations using fixed **run-as** accounts (with the `-RunAsCredential` parameter) aren't JEA-aware.</span></span> <span data-ttu-id="8e8d0-169">Rolldefinitioner fungerar inte som förväntat.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-169">Role definitions no longer function as expected.</span></span> <span data-ttu-id="8e8d0-170">Varje användare som har behörighet att komma åt slutpunkten tilldelas samma roll.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-170">Every user authorized to access the endpoint is assigned the same role.</span></span>

<span data-ttu-id="8e8d0-171">Du bör inte använda en **RunAsCredential** på en JEA-slutpunkt eftersom det är svårt att spåra åtgärder till specifika användare och saknar stöd för att mappa användare till roller.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-171">You shouldn't use a **RunAsCredential** on a JEA endpoint because it's difficult to trace actions back to specific users and lacks support for mapping users to roles.</span></span>

## <a name="winrm-endpoint-acl"></a><span data-ttu-id="8e8d0-172">WinRM slutpunkts-ACL</span><span class="sxs-lookup"><span data-stu-id="8e8d0-172">WinRM Endpoint ACL</span></span>

<span data-ttu-id="8e8d0-173">Som med vanlig PowerShell-fjärrkommunikation slutpunkter varje JEA-slutpunkt har en separat åtkomstkontrollista (ACL) som styr vem som kan autentisera med JEA-slutpunkt.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-173">As with regular PowerShell remoting endpoints, each JEA endpoint has a separate access control list (ACL) that controls who can authenticate with the JEA endpoint.</span></span> <span data-ttu-id="8e8d0-174">Om felaktigt konfigurerad, betrodda användare kanske inte kan komma åt JEA-slutpunkt och ej betrodda användare kan ha åtkomst.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-174">If improperly configured, trusted users may not be able to access the JEA endpoint and untrusted users may have access.</span></span> <span data-ttu-id="8e8d0-175">WinRM-ACL påverkar inte mappningen av användare till JEA-roller.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-175">The WinRM ACL doesn't affect the mapping of users to JEA roles.</span></span> <span data-ttu-id="8e8d0-176">Mappningen styrs av den **RoleDefinitions** fält i konfigurationsfilen session används för att registrera slutpunkten.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-176">Mapping is controlled by the **RoleDefinitions** field in the session configuration file used to register the endpoint.</span></span>

<span data-ttu-id="8e8d0-177">Som standard när en JEA-slutpunkt har flera rollfunktioner är WinRM ACL konfigurerad för att tillåta åtkomst till alla mappade användare.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-177">By default, when a JEA endpoint has multiple role capabilities, the WinRM ACL is configured to allow access to all mapped users.</span></span> <span data-ttu-id="8e8d0-178">Till exempel en JEA-session som har konfigurerats med hjälp av följande kommandon ger fullständig åtkomst till `CONTOSO\JEA_Lev1` och `CONTOSO\JEA_Lev2`.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-178">For example, a JEA session configured using the following commands grants full access to `CONTOSO\JEA_Lev1` and `CONTOSO\JEA_Lev2`.</span></span>

```powershell
$roles = @{ 'CONTOSO\JEA_Lev1' = 'Lev1Role'; 'CONTOSO\JEA_Lev2' = 'Lev2Role' }
New-PSSessionConfigurationFile -Path '.\jea.pssc' -SessionType RestrictedRemoteServer -RoleDefinitions $roles -RunAsVirtualAccount
Register-PSSessionConfiguration -Path '.\jea.pssc' -Name 'MyJEAEndpoint'
```

<span data-ttu-id="8e8d0-179">Du kan granska användarbehörigheter med den [Get-PSSessionConfiguration](/powershell/module/microsoft.powershell.core/get-pssessionconfiguration) cmdlet.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-179">You can audit user permissions with the [Get-PSSessionConfiguration](/powershell/module/microsoft.powershell.core/get-pssessionconfiguration) cmdlet.</span></span>

```powershell
Get-PSSessionConfiguration -Name 'MyJEAEndpoint' | Select-Object Permission
```

```Output
Permission
----------
CONTOSO\JEA_Lev1 AccessAllowed
CONTOSO\JEA_Lev2 AccessAllowed
```

<span data-ttu-id="8e8d0-180">Om du vill ändra vilka användare som har åtkomst, kör du antingen `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -ShowSecurityDescriptorUI` för en interaktiv prompt eller `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -SecurityDescriptorSddl <SDDL string>` att uppdatera behörigheterna.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-180">To change which users have access, run either `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -ShowSecurityDescriptorUI` for an interactive prompt or `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -SecurityDescriptorSddl <SDDL string>` to update the permissions.</span></span> <span data-ttu-id="8e8d0-181">Användare behöver minst *Invoke* behörighet att komma åt JEA-slutpunkt.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-181">Users need at least *Invoke* rights to access the JEA endpoint.</span></span>

<span data-ttu-id="8e8d0-182">Det är möjligt att skapa en JEA-slutpunkt som inte mappar en definierad roll till alla användare som har åtkomst.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-182">It's possible to create a JEA endpoint that doesn't map a defined role to every user that has access.</span></span> <span data-ttu-id="8e8d0-183">Dessa användare kan starta en JEA-session, men bara har åtkomst till cmdletarna som standard.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-183">These users can start a JEA session, but only have access to the default cmdlets.</span></span> <span data-ttu-id="8e8d0-184">Du kan granska användarbehörigheter i en JEA-slutpunkt genom att köra `Get-PSSessionCapability`.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-184">You can audit user permissions in a JEA endpoint by running `Get-PSSessionCapability`.</span></span> <span data-ttu-id="8e8d0-185">Mer information finns i [gransknings- och rapportering i JEA](audit-and-report.md).</span><span class="sxs-lookup"><span data-stu-id="8e8d0-185">For more information, see [Auditing and Reporting on JEA](audit-and-report.md).</span></span>

## <a name="least-privilege-roles"></a><span data-ttu-id="8e8d0-186">Minsta privilegium roller</span><span class="sxs-lookup"><span data-stu-id="8e8d0-186">Least privilege roles</span></span>

<span data-ttu-id="8e8d0-187">När du designar JEA roller, är det viktigt att komma ihåg att de virtuella och grupp-hanterade tjänstkonton som körs i bakgrunden kan har obegränsad åtkomst till den lokala datorn.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-187">When designing JEA roles, it's important to remember that the virtual and group-managed service accounts running behind the scenes can have unrestricted access to the local machine.</span></span> <span data-ttu-id="8e8d0-188">JEA rollfunktioner hjälper att begränsa kommandon och program som kan köras i den privilegierade kontexten.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-188">JEA role capabilities help limit the commands and applications that can be run in that privileged context.</span></span>
<span data-ttu-id="8e8d0-189">Felaktigt roller kan farliga kommandon som kan tillåta en användare att dela ut från JEA-gränser eller få åtkomst till känslig information.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-189">Improperly designed roles can allow dangerous commands that may permit a user to break out of the JEA boundaries or obtain access to sensitive information.</span></span>

<span data-ttu-id="8e8d0-190">Anta exempelvis att följande roll funktionen post:</span><span class="sxs-lookup"><span data-stu-id="8e8d0-190">For example, consider the following role capability entry:</span></span>

```powershell
@{
    VisibleCmdlets = 'Microsoft.PowerShell.Management\*-Process'
}
```

<span data-ttu-id="8e8d0-191">Den här rollen-funktionen kan användare köra alla PowerShell-cmdlet med substantivet **processen** från den **Microsoft.PowerShell.Management** modulen.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-191">This role capability allows users to run any PowerShell cmdlet with the noun **Process** from the **Microsoft.PowerShell.Management** module.</span></span> <span data-ttu-id="8e8d0-192">Användare kan behöva använda cmdletar som `Get-Process` att se vilka program som körs på systemet och `Stop-Process` att avsluta program som inte svarar.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-192">Users may need to access cmdlets like `Get-Process` to see what applications are running on the system and `Stop-Process` to kill applications that aren't responding.</span></span> <span data-ttu-id="8e8d0-193">Den här posten också kan dock `Start-Process`, som kan användas för att starta en godtycklig program med fullständig administratörsbehörighet.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-193">However, this entry also allows `Start-Process`, which can be used to start up an arbitrary program with full administrator permissions.</span></span> <span data-ttu-id="8e8d0-194">Programmet behöver inte installeras lokalt på systemet.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-194">The program doesn't need to be installed locally on the system.</span></span> <span data-ttu-id="8e8d0-195">En anslutna användare kan starta ett program från en filresurs som ger användaren privilegier som lokal administratör, kör skadlig kod och mycket mer.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-195">A connected user could start a program from a file share that gives the user local admin privileges, runs malware, and more.</span></span>

<span data-ttu-id="8e8d0-196">En säkrare version av den här samma roll funktionen ser ut som:</span><span class="sxs-lookup"><span data-stu-id="8e8d0-196">A more secure version of this same role capability would look like:</span></span>

```powershell
@{
    VisibleCmdlets = 'Microsoft.PowerShell.Management\Get-Process', 'Microsoft.PowerShell.Management\Stop-Process'
}
```

<span data-ttu-id="8e8d0-197">Undvik att använda jokertecken i rollfunktioner.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-197">Avoid using wildcards in role capabilities.</span></span> <span data-ttu-id="8e8d0-198">Var noga med att regelbundet [granska effektiva användarbehörigheter](audit-and-report.md#check-effective-rights-for-a-specific-user) att förstå vilka kommandon som är tillgängliga för användaren.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-198">Be sure to regularly [audit effective user permissions](audit-and-report.md#check-effective-rights-for-a-specific-user) to understand which commands are accessible to the user.</span></span>

## <a name="jea-doesnt-protect-against-admins"></a><span data-ttu-id="8e8d0-199">JEA skydda inte mot administratörer</span><span class="sxs-lookup"><span data-stu-id="8e8d0-199">JEA doesn't protect against admins</span></span>

<span data-ttu-id="8e8d0-200">En av huvudprinciperna för JEA är icke-administratörer att utföra vissa administratör tillåter.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-200">One of the core principles of JEA is that it allows non-admins to do some admin tasks.</span></span> <span data-ttu-id="8e8d0-201">JEA skydda inte mot användare som redan har administratörsbehörighet.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-201">JEA doesn't protect against users who already have administrator privileges.</span></span> <span data-ttu-id="8e8d0-202">Användare som tillhör **Domänadministratörer**lokal **administratörer**, eller andra mycket Privilegierade grupper kan kringgå JEAS skydd via ett annat sätt.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-202">Users who belong **Domain Admins**, local **Administrators**, or other highly privileged groups can circumvent JEA's protections via another means.</span></span> <span data-ttu-id="8e8d0-203">De kan till exempel logga in med RDP, använda fjärranslutna MMC-konsoler eller ansluta till obegränsad PowerShell-slutpunkter.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-203">For example, they could sign in with RDP, use remote MMC consoles, or connect to unconstrained PowerShell endpoints.</span></span> <span data-ttu-id="8e8d0-204">Lokala administratörer på ett system kan också ändra JEA-konfigurationer för att tillåta ytterligare användare eller ändra en roll-funktion för att utöka omfånget för en användare kan göra i sina JEA-session.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-204">Also, local admins on a system can modify JEA configurations to allow additional users or change a role capability to extend the scope of what a user can do in their JEA session.</span></span> <span data-ttu-id="8e8d0-205">Det är viktigt att utvärdera JEA användarnas utökade behörigheter för att se om det finns andra sätt att få privilegierad åtkomst till systemet.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-205">It's important to evaluate your JEA users' extended permissions to see if there are other ways to gain privileged access to the system.</span></span>

<span data-ttu-id="8e8d0-206">En vanlig metod är att använda JEA för vanliga dagliga underhåll och har en just-in-time, en hanteringslösning för privilegierad åtkomst som tillåter användare att tillfälligt blir lokala administratörer i nödsituationer.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-206">A common practice is to use JEA for regular day-to-day maintenance and have a just-in-time, privileged access management solution that allows users to temporarily become local admins in emergency situations.</span></span> <span data-ttu-id="8e8d0-207">Detta hjälper till att säkerställa användare inte permanenta administratörer i systemet, men kan hämta dessa rättigheter om och när de utföra ett arbetsflöde som dokument deras användning av dessa behörigheter.</span><span class="sxs-lookup"><span data-stu-id="8e8d0-207">This helps ensure users aren't permanent admins on the system, but can get those rights if, and only when, they complete a workflow that documents their use of those permissions.</span></span>
